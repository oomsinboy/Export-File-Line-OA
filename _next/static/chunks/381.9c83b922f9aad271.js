"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[381],{16463:function(e,t,n){var r=n(71169);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},64381:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var r=n(57437),a=n(38472),i=n(2265),s=function(e){return"object"==typeof e&&null!==e},o=function(e){var t=e.value,n=void 0===t?"":t,r=e.numInputs,a=void 0===r?4:r,o=e.onChange,c=e.onPaste,u=e.renderInput,l=e.shouldAutoFocus,f=void 0!==l&&l,d=e.inputType,p=void 0===d?"text":d,h=e.renderSeparator,v=e.placeholder,m=e.containerStyle,x=e.inputStyle,g=e.skipDefaultStyles,y=void 0!==g&&g,w=i.useState(0),j=w[0],b=w[1],N=i.useRef([]),S=function(){return n?n.toString().split(""):[]},P="number"===p||"tel"===p;i.useEffect(function(){N.current=N.current.slice(0,a)},[a]),i.useEffect(function(){var e;f&&(null===(e=N.current[0])||void 0===e||e.focus())},[f]);var C=function(){if("string"==typeof v){if(v.length===a)return v;v.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},D=function(e){return(P?!isNaN(Number(e)):"string"==typeof e)&&1===e.trim().length},T=function(e){var t=e.target.value;D(t)&&(I(t),E(j+1))},A=function(e){var t=e.nativeEvent,n=e.target.value;D(n)||(n.length!==a||n.split("").some(function(e){return!D(e)})||(B(n.split("")),E(a-1)),null===t.data&&"deleteContentBackward"===t.inputType&&(e.preventDefault(),I(""),E(j-1)),e.target.value="")},k=function(){b(j-1)},F=function(e){var t=S();[e.code,e.key].includes("Backspace")?(e.preventDefault(),I(""),E(j-1)):"Delete"===e.code?(e.preventDefault(),I("")):"ArrowLeft"===e.code?(e.preventDefault(),E(j-1)):"ArrowRight"===e.code?(e.preventDefault(),E(j+1)):e.key===t[j]?(e.preventDefault(),E(j+1)):("Spacebar"===e.code||"Space"===e.code||"ArrowUp"===e.code||"ArrowDown"===e.code)&&e.preventDefault()},E=function(e){var t,n,r=Math.max(Math.min(a-1,e),0);N.current[r]&&(null===(t=N.current[r])||void 0===t||t.focus(),null===(n=N.current[r])||void 0===n||n.select(),b(r))},I=function(e){var t=S();t[j]=e[0],B(t)},B=function(e){o(e.join(""))},O=function(e){e.preventDefault();var t,n=S(),r=j,i=e.clipboardData.getData("text/plain").slice(0,a-j).split("");if(!(P&&i.some(function(e){return isNaN(Number(e))}))){for(var s=0;s<a;++s)s>=j&&i.length>0&&(n[s]=null!==(t=i.shift())&&void 0!==t?t:"",r++);E(r),B(n)}};return i.createElement("div",{style:Object.assign({display:"flex",alignItems:"center"},s(m)&&m),className:"string"==typeof m?m:void 0,onPaste:c},Array.from({length:a},function(e,t){return t}).map(function(e){var t,n,r;return i.createElement(i.Fragment,{key:e},u({value:null!==(t=S()[e])&&void 0!==t?t:"",placeholder:null!==(r=null===(n=C())||void 0===n?void 0:n[e])&&void 0!==r?r:void 0,ref:function(t){return N.current[e]=t},onChange:T,onFocus:function(t){b(e),t.target.select()},onBlur:k,onKeyDown:F,onPaste:O,autoComplete:"off","aria-label":"Please enter OTP character ".concat(e+1),style:Object.assign(y?{}:{width:"1em",textAlign:"center"},s(x)?x:{}),className:"string"==typeof x?x:void 0,type:p,inputMode:P?"numeric":"text",onInput:A},e),e<a-1&&("function"==typeof h?h(e):h))}))},c=n(64379),u=n.n(c),l=n(16463);n(34376);var f=function(){let[e,t]=(0,i.useState)(""),n=(0,l.useSearchParams)().get("userId")||"",[s,c]=(0,i.useState)(null),f=async()=>{if(6!==e.length){u().fire({title:"ขออภัย",text:"กรุณากรอก OTP ให้ถูกต้อง",icon:"warning",confirmButtonText:"Try Again",customClass:{icon:"custom-swal2-warning-m"}});return}try{let t=await a.Z.post("".concat("http://203.154.83.14:8000/","otp/verify"),{userId:n,otp:e},{headers:{"Content-Type":"application/json"}});if(200===t.status){c(t.data);let e=t.data.message.split(" "),n=e.shift(),r=e.join(" ");u().fire({title:"".concat(n,"<br>").concat(r),text:"ระบบได้ทำการลงทะเบียน ข้อมูลของท่านเรียบร้อยแล้ว",icon:"success",cancelButtonText:"Close",customClass:{icon:"custom-swal2-warning-text"}})}else u().fire({title:"ขออภัย",text:"OTP ของท่านไม่ถูกต้องหรือไม่มีข้อมูลของคุณในระบบ",icon:"warning",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-warning"}})}catch(e){console.error("Error saving data:",e),u().fire({title:"ขออภัย",text:"OTP ของท่านไม่ถูกต้องหรือไม่มีข้อมูลของคุณในระบบ",icon:"warning",confirmButtonText:"Try Again",customClass:{icon:"custom-swal2-warning-m"}})}};return(0,r.jsxs)("div",{className:"min-h-screen",children:[(0,r.jsx)("div",{className:"py-2 bg-[#AF88FF] flex justify-center items-center h-12",children:(0,r.jsx)("div",{className:"text-white text-center",children:(0,r.jsx)("span",{children:"Sign up"})})}),(0,r.jsx)("div",{className:"pt-[25dvh] flex justify-center items-center text-center",children:s?(0,r.jsx)("div",{children:s&&(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-3xl text-[#5d3f9a]",children:"ลงทะเบียนสำเร็จ"}),(0,r.jsx)("div",{className:"text-2xl text-[#5d3f9a]",children:s.message})]})}):(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-2xl",children:"Please Fill in OTP"}),(0,r.jsx)("div",{children:(0,r.jsx)(o,{value:e,onChange:t,numInputs:6,inputType:"tel",containerStyle:{display:"flex",justifyContent:"center",margin:"20px 0"},inputStyle:{width:"50px",height:"60px",margin:"0 5px",fontSize:"18px",border:"1px solid #7F57D0",textAlign:"center"},renderInput:e=>(0,r.jsx)("input",{...e})})}),(0,r.jsx)("div",{className:"flex justify-center w-full my-10",children:(0,r.jsx)("button",{onClick:f,className:"text-white w-32 h-10 text-xl font-light bg-[#AF88FF] btn btn-active",children:"Submit"})})]})})]})}}}]);