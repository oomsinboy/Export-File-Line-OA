(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[470],{6993:function(e,t,n){Promise.resolve().then(n.bind(n,6569))},5055:function(e,t,n){!function(e){e.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),monthsParseExact:!0,weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(e){return"หลังเที่ยง"===e},meridiem:function(e,t,n){return e<12?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",ss:"%d วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",w:"1 สัปดาห์",ww:"%d สัปดาห์",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})}(n(9212))},6569:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var s=n(7437),a=n(2265),i=n(6463),r=n(8472),c=n(9212),l=n.n(c);n(5055);let o={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},d={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},u="mousemove",h="mouseup";function m(e,t){if(0===t)return e;let n=Math.PI/180*t;return[e[0]*Math.cos(n)+e[1]*Math.sin(n),e[1]*Math.cos(n)-e[0]*Math.sin(n)]}l().locale("th");var p=e=>{let{items:t}=e,[n,i]=(0,a.useState)(l()()),r=function(e){var t,n,s;let i;let{trackMouse:r}=e,c=a.useRef(Object.assign({},d)),l=a.useRef(Object.assign({},o)),p=a.useRef(Object.assign({},l.current));for(i in p.current=Object.assign({},l.current),l.current=Object.assign(Object.assign({},o),e),o)void 0===l.current[i]&&(l.current[i]=o[i]);let[g,x]=a.useMemo(()=>(function(e,t){let n=t=>{let n="touches"in t;n&&t.touches.length>1||e((e,a)=>{a.trackMouse&&!n&&(document.addEventListener(u,s),document.addEventListener(h,r));let{clientX:i,clientY:c}=n?t.touches[0]:t,l=m([i,c],a.rotationAngle);return a.onTouchStartOrOnMouseDown&&a.onTouchStartOrOnMouseDown({event:t}),Object.assign(Object.assign(Object.assign({},e),d),{initial:l.slice(),xy:l,start:t.timeStamp||0})})},s=t=>{e((e,n)=>{let s="touches"in t;if(s&&t.touches.length>1)return e;if(t.timeStamp-e.start>n.swipeDuration)return e.swiping?Object.assign(Object.assign({},e),{swiping:!1}):e;let{clientX:a,clientY:i}=s?t.touches[0]:t,[r,c]=m([a,i],n.rotationAngle),l=r-e.xy[0],d=c-e.xy[1],u=Math.abs(l),h=Math.abs(d),p=(t.timeStamp||0)-e.start,g=u>h?l>0?"Right":"Left":d>0?"Down":"Up",x="number"==typeof n.delta?n.delta:n.delta[g.toLowerCase()]||o.delta;if(u<x&&h<x&&!e.swiping)return e;let b={absX:u,absY:h,deltaX:l,deltaY:d,dir:g,event:t,first:e.first,initial:e.initial,velocity:Math.sqrt(u*u+h*h)/(p||1),vxvy:[l/(p||1),d/(p||1)]};b.first&&n.onSwipeStart&&n.onSwipeStart(b),n.onSwiping&&n.onSwiping(b);let f=!1;return(n.onSwiping||n.onSwiped||n[`onSwiped${g}`])&&(f=!0),f&&n.preventScrollOnSwipe&&n.trackTouch&&t.cancelable&&t.preventDefault(),Object.assign(Object.assign({},e),{first:!1,eventData:b,swiping:!0})})},a=t=>{e((e,n)=>{let s;if(e.swiping&&e.eventData){if(t.timeStamp-e.start<n.swipeDuration){s=Object.assign(Object.assign({},e.eventData),{event:t}),n.onSwiped&&n.onSwiped(s);let a=n[`onSwiped${s.dir}`];a&&a(s)}}else n.onTap&&n.onTap({event:t});return n.onTouchEndOrOnMouseUp&&n.onTouchEndOrOnMouseUp({event:t}),Object.assign(Object.assign(Object.assign({},e),d),{eventData:s})})},i=()=>{document.removeEventListener(u,s),document.removeEventListener(h,r)},r=e=>{i(),a(e)},c=(e,t)=>{let i=()=>{};if(e&&e.addEventListener){let r=Object.assign(Object.assign({},o.touchEventOptions),t.touchEventOptions),c=[["touchstart",n,r],["touchmove",s,Object.assign(Object.assign({},r),t.preventScrollOnSwipe?{passive:!1}:{})],["touchend",a,r]];c.forEach(([t,n,s])=>e.addEventListener(t,n,s)),i=()=>c.forEach(([t,n])=>e.removeEventListener(t,n))}return i},l={ref:t=>{null!==t&&e((e,n)=>{if(e.el===t)return e;let s={};return e.el&&e.el!==t&&e.cleanUpTouch&&(e.cleanUpTouch(),s.cleanUpTouch=void 0),n.trackTouch&&t&&(s.cleanUpTouch=c(t,n)),Object.assign(Object.assign(Object.assign({},e),{el:t}),s)})}};return t.trackMouse&&(l.onMouseDown=n),[l,c]})(e=>c.current=e(c.current,l.current),{trackMouse:r}),[r]);return c.current=(t=c.current,n=l.current,s=p.current,n.trackTouch&&t.el?t.cleanUpTouch?n.preventScrollOnSwipe!==s.preventScrollOnSwipe||n.touchEventOptions.passive!==s.touchEventOptions.passive?(t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:x(t.el,n)})):t:Object.assign(Object.assign({},t),{cleanUpTouch:x(t.el,n)}):(t.cleanUpTouch&&t.cleanUpTouch(),Object.assign(Object.assign({},t),{cleanUpTouch:void 0}))),g}({onSwipedLeft:()=>i(e=>e.clone().add(1,"months")),onSwipedRight:()=>i(e=>e.clone().subtract(1,"months")),trackMouse:!0}),c=(()=>{let e=n.daysInMonth(),t=n.startOf("month").day(),s=n.clone().subtract(1,"months").endOf("month").date(),a=[];for(let e=t-1;e>=0;e--)a.push({day:s-e,isCurrentMonth:!1});for(let t=1;t<=e;t++)a.push({day:t,isCurrentMonth:!0});return a})(),p=e=>{if(!t)return"";let s=n.clone().date(e).format("YYYY-MM-DD"),a=t.daily_details.findIndex(e=>e.date_before_appointment===s);if(-1===a)return"";let i=a===t.daily_details.length-1,r=a>0&&a<t.daily_details.length-1;return l()().isAfter(l()(s),"day")?"bg-[#C3C3C3] text-gray-500":0===a||i?"bg-[#AF88FF] text-white":r?"bg-[#F5C725] text-white":""};return(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"mx-5 text-xl font-bold",children:"รายการที่ต้องปฏิบัติ"}),(0,s.jsx)("div",{...r,children:(0,s.jsxs)("div",{className:"w-full max-w-md mx-auto bg-white p-4 rounded-lg ",children:[(0,s.jsx)("h2",{className:"text-[#AF88FF] text-xl font-bold text-center mb-4",children:n.format("MMMM YYYY")}),(0,s.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[["อา","จ","อ","พ","พฤ","ศ","ส"].map((e,t)=>(0,s.jsx)("div",{className:"text-center font-medium",children:e},t)),c.map((e,t)=>(0,s.jsx)("div",{className:"relative p-2 rounded-full h-12 flex flex-col items-center justify-center ".concat(e.isCurrentMonth?p(e.day):"text-gray-400"),children:(0,s.jsx)("div",{children:e.day})},t))]})]})})]})},g=n(6648);l().locale("th");var x=e=>{let{items:t}=e,[n,i]=(0,a.useState)(null),r=e=>{i(n===e?null:e)},c=e=>l()(e).isBefore(l()(),"day"),o=["วันที่ตรวจ","ข้อควรปฏิบัติ","ข้อควรปฏิบัติ","วันที่นัดส่องกล้อง"];return(0,s.jsx)("div",{className:"".concat(0===n||1===n?"min-h-[65vh]":"min-h-[50vh]","  pt-5 rounded-t-3xl bg-[#F9F2FB]"),children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-3 mx-5",children:"รายการแจ้งเตือนทั้งหมด"}),t?null==t?void 0:t.daily_details.map((e,a)=>{let i=c(e.date_before_appointment),d=0===a||a===t.daily_details.length-1?i?"border-gray-400":"border-[#AF88FF]":i?"border-gray-400":"border-[#F5C725]",u=0===a||a===t.daily_details.length-1?i?"bg-[#C3C3C3]":"bg-[#AF88FF]":i?"bg-[#C3C3C3]":"bg-[#F5C725]",h=0===a||a===t.daily_details.length-1?i?"text-[#C3C3C3]":"text-[#AF88FF]":i?"text-[#C3C3C3]":"text-[#F5C725]";return(0,s.jsxs)("div",{className:"mb-2 px-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between cursor-pointer bg-white ".concat(n===a?"".concat(d," border-t border-l border-r rounded-t-lg px-3 pt-3"):"border rounded-lg p-3"," ").concat(n===a&&i?"border-gray-400":""),onClick:()=>r(a),children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-4 h-4 rounded-full mr-2 ".concat(u)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold ".concat(h),children:o[a%o.length]}),(0,s.jsx)("p",{className:" ".concat(i?"text-[#C3C3C3]":""),children:l()(e.date_before_appointment).format("D MMMM YYYY")})]})]}),(0,s.jsx)("div",{children:n===a?(0,s.jsx)(g.default,{className:"gap-2",src:"/image/icon_up.png",alt:"icon up",width:30,height:30}):(0,s.jsx)(g.default,{className:"gap-2",src:"/image/icon_down.png",alt:"icon down",width:30,height:30})})]}),(0,s.jsx)("div",{className:"transition-max-height duration-500 ease-in-out ".concat(n===a?"max-h-[700px] opacity-100":"max-h-0"," overflow-hidden"),children:n===a&&(0,s.jsxs)("div",{className:"p-3 bg-white border-l border-r border-b rounded-b-lg ".concat(d),children:[(0,s.jsx)("div",{className:"border mb-3"}),(0,s.jsx)("div",{className:"break-words ".concat(i?"text-[#C3C3C3]":""),dangerouslySetInnerHTML:{__html:e.noti_detail}})]})})]},a)}):(0,s.jsxs)("div",{className:"flex flex-col px-4",children:[(0,s.jsx)("div",{className:"skeleton h-[74px] mb-2 w-full bg-gray-200"}),(0,s.jsx)("div",{className:"skeleton h-[74px] mb-2 w-full bg-gray-200"}),(0,s.jsx)("div",{className:"skeleton h-[74px] mb-2 w-full bg-gray-200"}),(0,s.jsx)("div",{className:"skeleton h-[74px] mb-2 w-full bg-gray-200"})]})]})})},b=e=>{let{items:t}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)(p,{items:t}),(0,s.jsx)(x,{items:t})]})},f=()=>{let e=(0,i.useSearchParams)(),[t,n]=(0,a.useState)(null),[c,l]=(0,a.useState)(!0),[o,d]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let t=e.get("userId");t?(async()=>{try{let e=await r.Z.get("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","user/appointments?userId=").concat(t));n(e.data)}catch(e){d("Error fetching data")}finally{l(!1)}})():l(!1)},[e]),(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsx)("div",{className:"z-10 fixed top-0 left-0 right-0 py-2 bg-[#AF88FF] flex justify-center items-center h-12",children:(0,s.jsx)("div",{className:"text-white text-center",children:(0,s.jsx)("span",{children:"Schedule"})})}),(0,s.jsx)("div",{className:"pt-16",children:(0,s.jsx)(b,{items:t})})]})}}},function(e){e.O(0,[990,595,472,971,23,744],function(){return e(e.s=6993)}),_N_E=e.O()}]);