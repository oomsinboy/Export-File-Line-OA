(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[527],{68259:function(e,t,a){Promise.resolve().then(a.bind(a,52682))},55055:function(e,t,a){!function(e){e.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),monthsParseExact:!0,weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(e){return"หลังเที่ยง"===e},meridiem:function(e,t,a){return e<12?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",ss:"%d วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",w:"1 สัปดาห์",ww:"%d สัปดาห์",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})}(a(19212))},57818:function(e,t,a){"use strict";a.d(t,{default:function(){return l.a}});var s=a(50551),l=a.n(s)},50551:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let s=a(99920);a(57437),a(2265);let l=s._(a(40148));function n(e,t){var a;let s={loading:e=>{let{error:t,isLoading:a,pastDelay:s}=e;return null}};"function"==typeof e&&(s.loader=e);let n={...s,...t};return(0,l.default)({...n,modules:null==(a=n.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},10912:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let s=a(55592);function l(e){let{reason:t,children:a}=e;if("undefined"==typeof window)throw new s.BailoutToCSRError(t);return a}},40148:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let s=a(57437),l=a(2265),n=a(10912),i=a(61481);function d(e){return{default:e&&"default"in e?e.default:e}}let r={loader:()=>Promise.resolve(d(()=>null)),loading:null,ssr:!0},c=function(e){let t={...r,...e},a=(0,l.lazy)(()=>t.loader().then(d)),c=t.loading;function o(e){let d=c?(0,s.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,r=t.ssr?(0,s.jsxs)(s.Fragment,{children:["undefined"==typeof window?(0,s.jsx)(i.PreloadCss,{moduleIds:t.modules}):null,(0,s.jsx)(a,{...e})]}):(0,s.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(a,{...e})});return(0,s.jsx)(l.Suspense,{fallback:d,children:r})}return o.displayName="LoadableComponent",o}},61481:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return n}});let s=a(57437),l=a(58512);function n(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let a=(0,l.getExpectedRequestStore)("next/dynamic css"),n=[];if(a.reactLoadableManifest&&t){let e=a.reactLoadableManifest;for(let a of t){if(!e[a])continue;let t=e[a].files.filter(e=>e.endsWith(".css"));n.push(...t)}}return 0===n.length?null:(0,s.jsx)(s.Fragment,{children:n.map(e=>(0,s.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:a.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},52682:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Y}});var s=a(57437),l=a(86504),n=a(2265),i=a(16463),d=a(38472),r=a(50448),c=e=>{let{items:t}=e,a=t.patient.appointment_date.split("T")[0],l="".concat(a,"T").concat(t.patient.appointment_time);return(0,s.jsx)("div",{className:"px-8",children:(0,s.jsx)("div",{className:"h-full w-full rounded-[15px] bg-white p-5 flex justify-center",children:(0,s.jsxs)("div",{className:"min-h-[81.71dvh] w-[70%] flex flex-col",children:[(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"text-2xl text-[#5955B3] font-semibold",children:"เพิ่มผู้ป่วยใหม่"})}),(0,s.jsxs)("form",{action:"",className:" mt-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("div",{className:"w-1/2 pr-4",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396]",children:"ชื่อ"}),(0,s.jsx)("label",{className:"bg-[#F8F5FB] input input-bordered flex items-center gap-2 w-full",children:(0,s.jsx)("input",{type:"text",className:"grow text-[#705396]",value:t.patient.patient_fname,readOnly:!0})})]})}),(0,s.jsx)("div",{className:"w-1/2 pl-4",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396]",children:"นามสกุล"}),(0,s.jsx)("label",{className:"bg-[#F8F5FB] input input-bordered flex items-center gap-2 w-full",children:(0,s.jsx)("input",{type:"text",className:"grow text-[#705396]",value:t.patient.patient_lname,readOnly:!0})})]})})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("div",{className:"w-1/2 pr-4",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396]",children:"เลขที่บัตรประจำตัวประชาชน"}),(0,s.jsx)("label",{className:"bg-[#F8F5FB] input input-bordered flex items-center gap-2 w-full",children:(0,s.jsx)("input",{type:"text",className:"grow text-[#705396]",value:t.patient.id_card,maxLength:13,pattern:"\\d{13}",readOnly:!0})})]})}),(0,s.jsx)("div",{className:"w-1/2 pl-4",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396]",children:"วันเดือนปีเกิด"}),(0,s.jsx)("label",{className:"bg-[#F8F5FB] input input-bordered flex items-center gap-2 w-full",children:(0,s.jsx)("input",{type:"date",className:"grow text-[#705396]",value:t.patient.dob,readOnly:!0})})]})})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("div",{className:"w-1/2 pr-4",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396]",children:"วันที่ลงทะเบียน"}),(0,s.jsx)("label",{className:" bg-[#F8F5FB] input input-bordered flex items-center gap-2 w-full",children:(0,s.jsx)("input",{type:"text",className:"grow pointer-events-none text-[#705396]",value:(0,r.p)(t.patient.register_date),readOnly:!0})})]})}),(0,s.jsx)("div",{className:"w-1/2 pl-4",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396]",children:"วันนัดหมาย"}),(0,s.jsx)("label",{className:"bg-[#F8F5FB] input input-bordered flex items-center gap-2 w-full",children:(0,s.jsx)("input",{type:"datetime-local",className:"grow text-[#705396]",value:l,readOnly:!0})})]})})]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{className:"my-2 w-1/2 pr-4",children:[(0,s.jsx)("div",{className:"flex",children:(0,s.jsx)("span",{className:"text-[#705396]",children:"เลือกยาที่ควรหยุดรับประทาน"})}),(0,s.jsxs)("div",{className:"rounded bg-[#E8DBF5] min-h-[46dvh] p-3",children:[(0,s.jsxs)("span",{className:"text-[#705396]",children:[" รายการที่เลือก ",t.patient.med.length," รายการ"]}),(0,s.jsx)("div",{className:"max-h-[30dvh] overflow-y-auto",children:t.patient.med.map((e,t)=>(0,s.jsxs)("div",{className:"flex justify-between pt-2",children:[(0,s.jsx)("select",{className:"w-[70%] mx-1 h-[3rem] rounded bg-[#F8F5FB] text-center text-[#705396]",defaultValue:e.medic,disabled:!0,children:(0,s.jsx)("option",{value:e.medic,children:e.medic})}),(0,s.jsx)("select",{className:"w-[20%] mx-1 h-[3rem] rounded text-center text-[#705396]",defaultValue:e.val,disabled:!0,children:(0,s.jsxs)("option",{value:e.val,children:[e.val," วัน"]})})]},t))})]})]}),(0,s.jsx)("div",{className:"w-1/2 pl-4 flex justify-center items-center",children:(0,s.jsxs)("div",{className:"text-center w-1/2",children:[(0,s.jsx)("div",{className:"text-[#461F78] text-3xl font-semibold my-2",children:"OTP"}),(0,s.jsx)("div",{className:"text-[#705396] my-2",children:"รหัสนี้ใช้สำหรับลงทะเบียนผู้ใช้งาน Line OA"}),(0,s.jsx)("div",{className:"p-10 bg-[#F8F5FB] my-2",children:(0,s.jsx)("span",{className:"text-[#7F57D0] text-4xl tracking-widest",children:t.patient.otp})})]})})]})]})})})},o=a(46797),m=a(66648),x=a(19212),p=a.n(x);a(55055);var u=e=>{let{isVisible:t,onClose:a,title:l,children:n}=e;return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-20 flex justify-center items-center",children:(0,s.jsx)("div",{className:"w-[80%] animate-modalOpen",children:(0,s.jsxs)("div",{className:"relative bg-white p-3 rounded",children:[(0,s.jsx)("div",{className:"absolute right-2",children:(0,s.jsx)("button",{onClick:()=>a(),children:(0,s.jsx)(m.default,{src:"/image/icon_close.png",alt:"logo",width:30,height:30})})}),n]})})}):null},h=a(64379),f=a.n(h),j=a(57818);a(18416);let g=(0,j.default)(()=>Promise.all([a.e(70),a.e(436)]).then(a.t.bind(a,98436,23)),{loadableGenerated:{webpack:()=>[98436]},ssr:!1});p().locale("th");var v=e=>{let{visit_id:t,dailyDetail:a,notilist:l}=e,[i,r]=(0,n.useState)(!1),[c,o]=(0,n.useState)(null),[x,h]=(0,n.useState)(!1),[j,v]=(0,n.useState)(""),[b,N]=(0,n.useState)(0),[w,y]=(0,n.useState)(p()()),_=w.clone().startOf("month").startOf("week"),F=w.clone().endOf("month").endOf("week"),B=_.clone().subtract(1,"day"),Y=[];for(;B.isBefore(F,"day");)Y.push(Array(7).fill(0).map(()=>B.add(1,"day").clone()));let S=e=>e.isSame(w,"month"),C=e=>{o(e),v(e.noti_detail||""),r(!0)},D=async()=>{let e=0===b?c.noti_id:b.toString(),a=new FormData;a.append("visit_id",t.toString()),a.append("noti_id",e),a.append("noti_detail",j);try{let e=await d.Z.post("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","daily_noti/task/").concat(c.daily_id),a);200===e.status?(h(!1),f().fire({title:"สำเร็จ",text:"คุณได้การแก้ไขเรียบร้อยแล้ว",icon:"success",confirmButtonText:"ปิด"}).then(()=>{window.location.reload()})):f().fire({title:"ขออภัย",text:"คุณทำรายการไม่ถูกต้อง กรุณาตรวจสอบใหม่อีกครั้ง",icon:"warning",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-warning"}})}catch(e){console.error("Error saving data:",e),f().fire({title:"ขออภัย",text:"เกิดข้อผิดพลาดในการบันทึกข้อมูล กรุณาลองใหม่อีกครั้ง",icon:"error",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-error"}})}};return(0,s.jsxs)("div",{className:"pl-8 pt-10",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center ",children:[(0,s.jsx)("button",{onClick:()=>{y(w.clone().subtract(1,"month"))},children:(0,s.jsx)(m.default,{src:"/image/icon_left.png",alt:"logo",width:15,height:15})}),(0,s.jsx)("span",{className:"text-lg font-semibold text-[#BE77F1]",children:w.format("MMMM YYYY")}),(0,s.jsx)("button",{onClick:()=>{y(w.clone().add(1,"month"))},children:(0,s.jsx)(m.default,{src:"/image/icon_right.png",alt:"logo",width:15,height:15})})]}),(()=>{let e=p().weekdays(!0);return(0,s.jsx)("div",{className:"grid grid-cols-7 bg-[#B498F0] text-white rounded mt-4",children:e.map(e=>(0,s.jsx)("div",{className:"text-center py-2",children:e},e))})})(),(0,s.jsx)("div",{className:"grid grid-cols-7",children:Y.map((e,t)=>(0,s.jsx)("div",{className:"contents",children:e.map((e,t)=>{let l=a.some((t,s)=>p()(t.date_before_appointment).isSame(e,"day")&&s===a.length-1);return(0,s.jsxs)("div",{className:"relative flex justify-end items-end text-center h-24 p-2 w-full border ".concat(S(e)?"":"text-gray-400"),children:[a.map((t,l)=>{if(p()(t.date_before_appointment).isSame(e,"day")){let n=0===l,i=p()().isSame(e,"day"),d=e.isBefore(p()(),"day");return(0,s.jsxs)("div",{children:[n&&(0,s.jsx)("div",{className:"w-[calc(100%-8px)] absolute top-1 left-1 text-white bg-[#BE77F1] p-1 rounded",children:"ลงทะเบียน"}),l===a.length-1?(0,s.jsx)("div",{className:"h-[calc(100%-8px)] w-[calc(100%-8px)] absolute top-1 left-1 text-center text-white p-1 rounded ".concat(i||!d?"bg-[#BE77F1]":"bg-[#AEB2B5]"),children:"ส่องกล้อง"}):(0,s.jsx)("button",{className:"absolute bottom-2 left-2 rounded text-white w-7 h-7 font-light flex justify-center items-center ".concat(n?"bg-[#AEB2B5] hover:bg-[#e5e7eb]":i||!d?"bg-[#705396] hover:bg-[#BE77F1]":"bg-[#AEB2B5] hover:bg-[#e5e7eb]"),onClick:()=>C(t),children:(0,s.jsx)(m.default,{className:"gap-2",src:n?"/image/icon_edit_pass.png":i||!d?"/image/icon_edit.png":"/image/icon_edit_pass.png",alt:"logo",width:20,height:20})})]},t.date_before_appointment)}return null}),(0,s.jsx)("div",{className:"absolute bottom-2 right-3 ".concat(l?"text-white":""),children:e.format("D")})]},t)})},t))}),(0,s.jsx)(u,{isVisible:i,onClose:()=>{r(!1),h(!1),v(c&&c.noti_detail||"")},title:"รายละเอียดการแจ้งเตือน",children:c&&(0,s.jsxs)("div",{className:"p-5",children:[(0,s.jsxs)("div",{className:"text-2xl text-[#5955B3] font-semibold",children:["แจ้งเตือนคุณ ",c.ptname]}),(0,s.jsxs)("div",{className:"text-2xl text-[#5955B3] font-semibold",children:["วันที่ ",c.date_before_appointment]}),(0,s.jsx)("div",{className:"rounded ".concat(x?"bg-white":" bg-[#E8DBF5]","  min-h-[48dvh] p-3 mt-4 text-xl mb-16"),children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("select",{className:"w-full mb-4 p-2 border rounded",value:b,onChange:e=>{let t=parseInt(e.target.value,10);N(t);let a=l.find(e=>e.id===t);v(a?a.detail:"")},children:[(0,s.jsx)("option",{value:0,disabled:!0,children:"เลือกการแจ้งเตือน"}),l.map(e=>(0,s.jsx)("option",{value:e.id,children:e.header},e.id))]}),(0,s.jsx)(g,{className:"h-[360px]",value:j,onChange:e=>v(e),theme:"snow"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"my-2",children:"ข้อควรปฏิบัติก่อนรับการตรวจส่องกล้องลำไส้ใหญ่"}),(0,s.jsx)("div",{className:"break-words max-h-[460px]",dangerouslySetInnerHTML:{__html:c.noti_detail||""}})]})}),!p()(c.date_before_appointment).isBefore(p()(),"day")&&(0,s.jsx)("div",{className:"flex justify-center mt-4",children:(0,s.jsxs)("button",{onClick:x?D:()=>{h(!0)},className:"relative text-white w-38 font-light btn btn-active mx-4 ".concat(x?"bg-[#693092]":"bg-[#AF88FF]"),children:[(0,s.jsx)(m.default,{className:"gap-2",src:x?"/image/icon_save.png":"/image/icon_edit.png",alt:"logo",width:30,height:30}),(0,s.jsx)("span",{children:x?"Save":"Edit"})]})})]})})]})},b=a(91322),N=a(40286),w=a(54952),y=a(72247);let _=(0,j.default)(()=>Promise.all([a.e(70),a.e(436)]).then(a.t.bind(a,98436,23)),{loadableGenerated:{webpack:()=>[98436]},ssr:!1});p().locale("th");var F=e=>{let{items:t}=e,[a,l]=(0,n.useState)(!1),[i,c]=(0,n.useState)(t.patient.patient_fname),[o,x]=(0,n.useState)(t.patient.patient_lname),[h,j]=(0,n.useState)(t.patient.id_card),[g,F]=(0,n.useState)(p()(t.patient.dob)),[B,Y]=(0,n.useState)(p()("".concat(t.patient.appointment_date.split("T")[0],"T").concat(t.patient.appointment_time))),[S,C]=(0,n.useState)(t.patient.line_name),[D,M]=(0,n.useState)([]),[k,O]=(0,n.useState)([]),[T,E]=(0,n.useState)({}),[P,L]=(0,n.useState)({}),[H,A]=(0,n.useState)(""),[I,R]=(0,n.useState)([]),[Z,V]=(0,n.useState)(!1),[W,Q]=(0,n.useState)(null),[G,U]=(0,n.useState)(!1),[J,q]=(0,n.useState)(""),[z,K]=(0,n.useState)(0);(0,n.useEffect)(()=>{let e=async()=>{try{let e=await d.Z.get("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","notification"));R(e.data)}catch(e){console.error("Error fetching noti data:",e)}};(async()=>{try{let e=(await d.Z.get("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","medical"))).data;if(O(e),t.patient.med){let a=t.patient.med.map((t,a)=>{let s=e.some(e=>e.name===t.medic);return{id:a,name:t.medic,dose:t.val,isOther:!s}});M(a)}}catch(e){console.error("Error fetching medical data:",e)}})(),e()},[t.patient.med]);let X=async()=>{let e=D.some(e=>!e.name||!e.dose);if(p()(),B&&p()(B),e){A("กรุณากรอกข้อมูลยาและจำนวนวันที่รับประทานให้ครบถ้วน");return}A("");let t={};if(i.trim()||(t.firstname="กรุณากรอกชื่อ"),o.trim()||(t.lastname="กรุณากรอกนามสกุล"),h.trim()?13!==h.trim().length&&(t.idCard="กรุณากรอกบัตรประจำตัวประชาชนให้ถูกต้อง (13 หลัก)"):t.idCard="กรุณากรอกบัตรประจำตัวประชาชน",g||(t.birthDate="กรุณากรอกวันเดือนปีเกิด"),B||(t.appointmentDate="กรุณากรอกวันนัดหมาย"),Object.keys(t).length>0){L(t);return}L({}),await el()},$=e=>{M(D.filter(t=>t.id!==e))},ee=(e,t)=>{let a=e.target.value;D.some(e=>e.name===a&&e.id!==t&&"other"!==a)?f().fire({title:"ขออภัย",text:"รายการยานี้ถูกเลือกแล้ว",icon:"error",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-error"}}):M(D.map(e=>{if(e.id===t){let t="other"===a||!k.some(e=>e.name===a);return{...e,name:a,isOther:t}}return e}))},et=(e,t)=>{E({...T,[t]:e.target.value}),M(D.map(a=>a.id===t?{...a,name:e.target.value}:a))},ea=(e,t)=>{M(D.map(a=>a.id===t?{...a,dose:e.target.value}:a))},es=async()=>{let e={visit_id:t.patient.visit_id,userId:t.patient.line_id};try{let t=await d.Z.post("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","visit/line/renew"),e);200===t.status?C(t.data.line_name):console.error("Failed to refresh data")}catch(e){console.error("Error while refreshing data:",e)}},el=async()=>{let e=JSON.stringify(D.map(e=>({val:e.dose,medic:e.name}))),a=new FormData;a.append("fname",i),a.append("lname",o),a.append("idcard",h),a.append("dob",g?g.format("YYYY-MM-DD"):""),a.append("appointment_date",B?B.format("YYYY-MM-DD"):""),a.append("appointment_time",B?B.format("HH:mm:ss"):""),a.append("patient_id",String(t.patient.patient_id)),a.append("med",e);try{let e=await d.Z.post("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","visit/task/").concat(t.patient.visit_id),a);200===e.status?(l(!1),f().fire({title:"สำเร็จ",text:"คุณได้ทำการแก้ไขเรียบร้อยแล้ว",icon:"success",confirmButtonText:"ปิด"}).then(()=>{window.location.reload()})):f().fire({title:"ขออภัย",text:"คุณทำรายการไม่ถูกต้อง กรุณาตรวจสอบใหม่อีกครั้ง",icon:"warning",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-warning"}})}catch(e){console.error("Error saving data:",e),f().fire({title:"ขออภัย",text:"เกิดข้อผิดพลาดในการบันทึกข้อมูล กรุณาลองใหม่อีกครั้ง",icon:"error",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-error"}})}},en=t.daily_detail.slice(1,t.daily_detail.length-1).some(e=>p()().isSame(e.date_before_appointment,"day")),ei=e=>{Q(e),q(e.noti_detail||""),V(!0)},ed=async()=>{let e=new FormData,a=0===z?W.noti_id:z.toString();e.append("visit_id",t.patient.visit_id.toString()),e.append("noti_id",a),e.append("noti_detail",J);try{let t=await d.Z.post("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","daily_noti/task/").concat(W.daily_id),e);200===t.status?(U(!1),f().fire({title:"สำเร็จ",text:"คุณได้การแก้ไขเรียบร้อยแล้ว",icon:"success",confirmButtonText:"ปิด"}).then(()=>{window.location.reload()})):f().fire({title:"ขออภัย",text:"คุณทำรายการไม่ถูกต้อง กรุณาตรวจสอบใหม่อีกครั้ง",icon:"warning",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-warning"}})}catch(e){console.error("Error saving data:",e),f().fire({title:"ขออภัย",text:"เกิดข้อผิดพลาดในการบันทึกข้อมูล กรุณาลองใหม่อีกครั้ง",icon:"error",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-error"}})}};return(0,s.jsx)("div",{className:"px-8",children:(0,s.jsx)("div",{className:"h-full w-full rounded-[15px] bg-white p-5 ",children:(0,s.jsxs)("div",{className:"min-h-[81.71dvh] flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"text-2xl text-[#5955B3] font-semibold",children:"ลงทะเบียนผู้ป่วย"})}),(0,s.jsx)("div",{className:"flex",children:(0,s.jsxs)("button",{onClick:a?X:()=>{l(!0)},className:"relative text-white w-38 font-light btn btn-active mx-4 ".concat(a?"bg-[#693092]":"bg-[#AF88FF]"),children:[(0,s.jsx)(m.default,{className:"gap-2",src:a?"/image/icon_save.png":"/image/icon_edit.png",alt:"logo",width:30,height:30}),(0,s.jsx)("span",{children:a?"Save":"Edit"})]})})]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("div",{className:" w-[55%]",children:[(0,s.jsxs)("form",{action:"",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("div",{className:"w-1/2 pr-4",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396]",children:"ชื่อ"}),(0,s.jsx)("label",{className:"".concat(a?"":"bg-[#F8F5FB]"," input input-bordered flex items-center gap-2 w-full"),children:(0,s.jsx)("input",{type:"text",className:"grow text-[#705396]",readOnly:!a,value:i,onChange:e=>c(e.target.value)})}),P.firstname&&(0,s.jsx)("span",{className:"text-red-500",children:P.firstname})]})}),(0,s.jsx)("div",{className:"w-1/2 pl-4",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396] ",children:"นามสกุล"}),(0,s.jsx)("label",{className:"".concat(a?"":"bg-[#F8F5FB]"," input input-bordered flex items-center gap-2 w-full"),children:(0,s.jsx)("input",{type:"text",className:"grow text-[#705396]",readOnly:!a,value:o,onChange:e=>x(e.target.value)})}),P.lastname&&(0,s.jsx)("span",{className:"text-red-500",children:P.lastname})]})})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("div",{className:"w-1/2 pr-4",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396]",children:"เลขที่บัตรประจำตัวประชาชน"}),(0,s.jsx)("label",{className:"".concat(a?"":"bg-[#F8F5FB]"," input input-bordered flex items-center gap-2 w-full"),children:(0,s.jsx)("input",{type:"text",className:"grow text-[#705396]",value:h,maxLength:13,pattern:"\\d{13}",readOnly:!a,onChange:e=>j(e.target.value)})}),P.idCard&&(0,s.jsx)("span",{className:"text-red-500",children:P.idCard})]})}),(0,s.jsx)("div",{className:"w-1/2 pl-4",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396]",children:"วันเดือนปีเกิด"}),a?(0,s.jsx)(w._,{dateAdapter:y.Q,children:(0,s.jsx)(b.M,{value:g,format:"DD-MM-YYYY",onChange:e=>F(e),disabled:!a,slotProps:{textField:{fullWidth:!0,className:"".concat(a?"":"bg-[#F8F5FB]"," rounded-lg text-[#705396] hover:border-gray-500 h-[48px]"),InputProps:{style:{borderRadius:"8px",color:"#705396"},className:"w-full rounded-lg text-[#705396] focus:border-gray-500 h-[48px]"}}}})}):(0,s.jsx)("label",{className:"bg-[#F8F5FB] input input-bordered flex items-center gap-2 w-full",children:(0,s.jsx)("input",{type:"text",className:"grow text-[#705396]",value:g?g.format("DD-MM-YYYY"):"",readOnly:!0})}),P.birthDate&&(0,s.jsx)("span",{className:"text-red-500",children:P.birthDate})]})})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("div",{className:"w-1/2 pr-4",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396]",children:"วันที่ลงทะเบียน"}),(0,s.jsx)("label",{className:" bg-[#F8F5FB] input input-bordered flex items-center gap-2 w-full",children:(0,s.jsx)("input",{type:"text",className:"grow pointer-events-none text-[#705396]",value:(0,r.p)(t.patient.register_date),readOnly:!0})})]})}),(0,s.jsx)("div",{className:"w-1/2 pl-4",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396]",children:"วันนัดหมาย"}),a?(0,s.jsx)(w._,{dateAdapter:y.Q,children:(0,s.jsx)(N.x,{value:B,format:"DD-MM-YYYY HH:mm:ss",onChange:e=>Y(e),disabled:!a,slotProps:{textField:{fullWidth:!0,className:"".concat(a?"":"bg-[#F8F5FB]"," rounded-lg text-[#705396] hover:border-gray-500 h-[48px]"),InputProps:{style:{borderRadius:"8px",color:"#705396"},className:"w-full rounded-lg text-[#705396] focus:border-gray-500 h-[48px]"}}}})}):(0,s.jsx)("label",{className:"bg-[#F8F5FB] input input-bordered flex items-center gap-2 w-full",children:(0,s.jsx)("input",{type:"text",className:"grow text-[#705396]",value:B?B.format("DD-MM-YYYY HH:mm:ss"):"",readOnly:!0})}),P.appointmentDate&&(0,s.jsx)("span",{className:"text-red-500",children:P.appointmentDate})]})})]})]}),(0,s.jsxs)("div",{className:"my-2 relative  ".concat(en?"w-full":"w-1/2 pr-4"),children:[(0,s.jsxs)("div",{className:"flex ".concat(en?"h-[50px]":"h-[30px]"),children:[(0,s.jsx)("span",{className:"text-[#705396]  ".concat(en?"flex items-center":""," "),children:en?"ข้อความที่ต้องส่งวันที่ ".concat(p()().format("DD-MM-YYYY")):"เลือกยาที่ควรหยุดรับประทาน"}),!en&&a&&(0,s.jsx)("button",{className:"mx-2",onClick:()=>{M([...D,{id:Date.now(),name:"",dose:"",isOther:!1}])},children:(0,s.jsx)(m.default,{src:"/image/icon_addplus.png",alt:"add medication",width:30,height:30})})]}),H&&(0,s.jsx)("span",{className:"text-red-500",children:H}),(0,s.jsx)("div",{className:"rounded bg-[#E8DBF5] ".concat(H?"min-h-[44dvh]":"min-h-[46dvh]"," p-3"),children:en?(0,s.jsx)("div",{className:"",children:t.daily_detail.filter(e=>p()(e.date_before_appointment).isSame(p()(),"day")).map((e,t)=>{var a;return(0,s.jsxs)("div",{className:"items-center m-2",children:[(0,s.jsx)("div",{className:"flex",children:null===(a=e.noti_image)||void 0===a?void 0:a.map((e,t)=>(0,s.jsx)(m.default,{src:e,width:100,height:100,alt:"notification image ".concat(t),className:"cursor-pointer max-w-[80px] h-[80px] object-cover rounded-lg mr-3",onClick:()=>window.open(e,"_blank")},t))}),(0,s.jsxs)("div",{className:"w-full text-[#705396] mt-2",children:[(0,s.jsxs)("p",{className:"my-2",children:["แจ้งคุณ ",i," ",o]}),(0,s.jsx)("p",{className:"my-2",children:"ข้อควรปฏิบัติก่อนรับการตรวจส่องกล้องลำไส้ใหญ่"}),(0,s.jsx)("div",{className:" break-words max-h-[30dvh] overflow-y-auto",dangerouslySetInnerHTML:{__html:e.noti_detail||""}})]}),(0,s.jsxs)("button",{onClick:()=>ei(e),className:"absolute top-0 left-56 text-white w-38 font-light btn btn-active mx-4 bg-[#693092] ",children:[(0,s.jsx)(m.default,{className:"gap-1",src:"/image/icon_edit.png",alt:"logo",width:30,height:30}),(0,s.jsx)("span",{children:" Edit"})]})]},t)})}):(0,s.jsxs)("div",{children:[(0,s.jsxs)("span",{className:"text-[#705396]",children:[" รายการที่เลือก ",a?D.length:t.patient.med.length," รายการ"]}),(0,s.jsx)("div",{className:"".concat(H?"min-h-[38dvh]":"max-h-[40dvh]","  overflow-y-auto"),children:a?(0,s.jsx)("div",{children:D.map(e=>(0,s.jsxs)("div",{className:"flex justify-between pt-2",children:[e.isOther?(0,s.jsx)("input",{type:"text",className:"w-[70%] mx-1 h-[3rem] rounded bg-[#F8F5FB] text-center text-[#705396]",value:"other"===e.name?"":T[e.id]||e.name||"",onChange:t=>et(t,e.id),placeholder:"ระบุชื่อยา"}):(0,s.jsxs)("select",{className:"w-[70%] mx-1 h-[3rem] rounded bg-[#F8F5FB] text-center text-[#705396]",value:e.name,onChange:t=>ee(t,e.id),children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"เลือกยา"}),k.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.id)),(0,s.jsx)("option",{value:"other",children:"อื่นๆ"})]}),(0,s.jsxs)("select",{className:"w-[20%] mx-1 h-[3rem] rounded text-center text-[#705396]",value:e.dose,onChange:t=>ea(t,e.id),children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"วัน"}),[...Array(7)].map((e,t)=>(0,s.jsxs)("option",{value:t+1,children:[t+1," วัน"]},t+1))]}),(0,s.jsx)("button",{className:"mx-1",onClick:()=>$(e.id),children:(0,s.jsx)(m.default,{src:"/image/icon_delete.png",alt:"delete medication",width:30,height:30})})]},e.id))}):(0,s.jsx)("div",{children:D.map(e=>(0,s.jsxs)("div",{className:"flex justify-between pt-2",children:[e.isOther?(0,s.jsx)("input",{type:"text",className:"w-[70%] mx-1 h-[3rem] opacity-70 rounded bg-[#F8F5FB] text-center text-[#705396]",defaultValue:e.name,disabled:!0,placeholder:"ระบุชื่อยา"}):(0,s.jsx)("select",{className:"w-[70%] mx-1 h-[3rem] rounded bg-[#F8F5FB] text-center text-[#705396]",defaultValue:e.name,disabled:!0,children:(0,s.jsx)("option",{value:e.name,children:e.name})}),(0,s.jsx)("select",{className:"w-[20%] mx-1 h-[3rem] rounded text-center text-[#705396]",defaultValue:e.dose,disabled:!0,children:(0,s.jsxs)("option",{value:e.dose,children:[e.dose," วัน"]})})]},e.id))})})]})})]})]}),(0,s.jsxs)("div",{className:" w-[45%]",children:[(0,s.jsxs)("div",{className:"flex pl-8",children:[(0,s.jsx)("div",{className:"w-[63.016%] ",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396] ",children:"Line Username"}),(0,s.jsx)("label",{className:"bg-[#F8F5FB] relative input input-bordered flex items-center gap-2 w-full",children:(0,s.jsx)("input",{type:"text",className:"grow text-[#705396]",value:S,readOnly:!0})})]})}),(0,s.jsx)("div",{className:"flex items-center pt-6",children:(0,s.jsx)("button",{onClick:es,className:"relative text-white font-light bg-[#693092] btn btn-active mx-3",children:(0,s.jsx)(m.default,{src:"/image/icon_refresh.png",alt:"logo",width:30,height:30})})})]}),(0,s.jsx)(v,{visit_id:t.patient.visit_id,dailyDetail:t.daily_detail,notilist:I}),(0,s.jsx)(u,{isVisible:Z,onClose:()=>{V(!1),U(!1),q(W&&W.noti_detail||"")},title:"รายละเอียดการแจ้งเตือน",children:W&&(0,s.jsxs)("div",{className:"p-5",children:[(0,s.jsxs)("div",{className:"text-2xl text-[#5955B3] font-semibold",children:["แจ้งเตือนคุณ ",W.ptname]}),(0,s.jsxs)("div",{className:"text-2xl text-[#5955B3] font-semibold",children:["วันที่ ",W.date_before_appointment]}),(0,s.jsxs)("div",{className:"rounded bg-white  min-h-[48dvh] p-3 mt-4 text-xl mb-16",children:[(0,s.jsxs)("select",{className:"w-full mb-4 p-2 border rounded",value:z,onChange:e=>{let t=parseInt(e.target.value,10);console.log(t),K(t);let a=I.find(e=>e.id===t);q(a?a.detail:"")},children:[(0,s.jsx)("option",{value:0,disabled:!0,children:"เลือกการแจ้งเตือน"}),I.map(e=>(0,s.jsx)("option",{value:e.id,children:e.header},e.id))]}),(0,s.jsx)(_,{className:"h-[360px]",value:J,onChange:e=>q(e),theme:"snow"})]}),!p()(W.date_before_appointment).isBefore(p()(),"day")&&(0,s.jsx)("div",{className:"flex justify-center mt-4",children:(0,s.jsxs)("button",{onClick:ed,className:"relative text-white w-38 font-light btn btn-active mx-4 bg-[#693092]",children:[(0,s.jsx)(m.default,{className:"gap-2",src:"/image/icon_save.png",alt:"logo",width:30,height:30}),(0,s.jsx)("span",{children:"Save"})]})})]})})]})]})]})})})};p().locale("th");var B=e=>{let{items:t}=e,a=(0,i.useRouter)(),[l,c]=(0,n.useState)(!1),[o,x]=(0,n.useState)(t.patient.patient_fname),[u,h]=(0,n.useState)(t.patient.patient_lname),[j,g]=(0,n.useState)(t.patient.id_card),[_,F]=(0,n.useState)(p()(t.patient.dob)),[B,Y]=(0,n.useState)(""),[S,C]=(0,n.useState)(p()("".concat(t.patient.appointment_date.split("T")[0],"T").concat(t.patient.appointment_time))),[D,M]=(0,n.useState)(t.patient.line_name),[k,O]=(0,n.useState)([]),[T,E]=(0,n.useState)([]),[P,L]=(0,n.useState)({}),[H,A]=(0,n.useState)({}),[I,R]=(0,n.useState)(""),[Z,V]=(0,n.useState)([]);(0,n.useEffect)(()=>{l||C(p()("".concat(t.patient.appointment_date.split("T")[0],"T").concat(t.patient.appointment_time))),(async()=>{try{let e=(await d.Z.get("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","medical"))).data;if(E(e),t.patient.med){let a=t.patient.med.map((t,a)=>{let s=e.some(e=>e.name===t.medic);return{id:a,name:t.medic,dose:t.val,isOther:!s}});O(a)}}catch(e){console.error("Error fetching medical data:",e)}})();let e=setInterval(()=>{Y((0,r.e)())},1e3);return()=>clearInterval(e)},[t.patient.appointment_date,t.patient.appointment_time,t.patient.med,l]);let W=e=>{O(k.filter(t=>t.id!==e))},Q=(e,t)=>{let a=e.target.value;k.some(e=>e.name===a&&e.id!==t&&"other"!==a)?f().fire({title:"ขออภัย",text:"รายการยานี้ถูกเลือกแล้ว",icon:"error",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-error"}}):O(k.map(e=>{if(e.id===t){let t="other"===a||!T.some(e=>e.name===a);return{...e,name:a,isOther:t}}return e}))},G=(e,t)=>{L({...P,[t]:e.target.value}),O(k.map(a=>a.id===t?{...a,name:e.target.value}:a))},U=(e,t)=>{O(k.map(a=>a.id===t?{...a,dose:e.target.value}:a))},J=async()=>{let e={visit_id:t.patient.visit_id,userId:t.patient.line_id};try{let t=await d.Z.post("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","visit/line/renew"),e);200===t.status?M(t.data.line_name):console.error("Failed to refresh data")}catch(e){console.error("Error while refreshing data:",e)}},q=async()=>{let e=k.some(e=>!e.name||!e.dose),t=p()();if(e){R("กรุณากรอกข้อมูลยาและจำนวนวันที่รับประทานให้ครบถ้วน");return}R("");let a={};if(o.trim()||(a.firstname="กรุณากรอกชื่อ"),u.trim()||(a.lastname="กรุณากรอกนามสกุล"),j.trim()?13!==j.trim().length&&(a.idCard="กรุณากรอกบัตรประจำตัวประชาชนให้ถูกต้อง (13 หลัก)"):a.idCard="กรุณากรอกบัตรประจำตัวประชาชน",_||(a.birthDate="กรุณากรอกวันเดือนปีเกิด"),S?4>=S.diff(t,"days")&&(a.appointmentDate="กรุณากรอกวันนัดหมายที่มากกว่าวันปัจจุบัน 5 วัน"):a.appointmentDate="กรุณากรอกวันนัดหมาย",Object.keys(a).length>0){A(a);return}A({}),await z()},z=async()=>{let e=JSON.stringify(k.map(e=>({val:e.dose,medic:e.name}))),s=new FormData;s.append("fname",o),s.append("lname",u),s.append("idcard",j),s.append("dob",_?_.format("YYYY-MM-DD"):""),s.append("appointment_date",S?S.format("YYYY-MM-DD"):""),s.append("appointment_time",S?S.format("HH:mm:ss"):""),s.append("med",e),s.append("patient_id",t.patient.patient_id.toString());try{let e=await d.Z.post("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","visit/newappointment"),s);200===e.status?(console.log(e.data),f().fire({title:"สำเร็จ",text:"คุณได้ทำรายการเรียบร้อยแล้ว",icon:"success",confirmButtonText:"ปิด"}).then(()=>{a.push("/home/patient/view-patient?id=".concat(e.data.visit_id))})):f().fire({title:"ขออภัย",text:"คุณทำรายการไม่ถูกต้อง กรุณาตรวจสอบใหม่อีกครั้ง",icon:"warning",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-warning"}})}catch(e){console.error("Error saving data:",e),f().fire({title:"ขออภัย",text:"เกิดข้อผิดพลาดในการบันทึกข้อมูล กรุณาลองใหม่อีกครั้ง",icon:"error",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-error"}})}};return(0,s.jsx)("div",{className:"px-8",children:(0,s.jsx)("div",{className:"h-full w-full rounded-[15px] bg-white p-5 ",children:(0,s.jsxs)("div",{className:"min-h-[81.71dvh] flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"text-2xl text-[#5955B3] font-semibold",children:l?"กำหนดการใหม่":"ตรวจสำเร็จแล้ว"})}),(0,s.jsx)("div",{className:"flex",children:(0,s.jsxs)("button",{onClick:l?q:()=>{c(!0)},className:"relative text-white w-38 font-light btn btn-active mx-4 bg-[#693092]",children:[(0,s.jsx)(m.default,{className:"gap-2",src:l?"/image/icon_save.png":"/image/icon_new_appointment.png",alt:"logo",width:30,height:30}),(0,s.jsx)("span",{children:l?"Save":"New Appointment"})]})})]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("div",{className:" w-[55%]",children:[(0,s.jsxs)("form",{action:"",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("div",{className:"w-1/2 pr-4",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396]",children:"ชื่อ"}),(0,s.jsx)("label",{className:"".concat(l?"bg-white":"bg-[#F8F5FB]","  input input-bordered flex items-center gap-2 w-full"),children:(0,s.jsx)("input",{type:"text",className:"grow text-[#705396]",readOnly:!l,value:o,onChange:e=>x(e.target.value)})})]})}),(0,s.jsx)("div",{className:"w-1/2 pl-4",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396] ",children:"นามสกุล"}),(0,s.jsx)("label",{className:"".concat(l?"bg-white":"bg-[#F8F5FB]","  input input-bordered flex items-center gap-2 w-full"),children:(0,s.jsx)("input",{type:"text",className:"grow text-[#705396]",readOnly:!l,value:u,onChange:e=>h(e.target.value)})}),H.lastname&&(0,s.jsx)("span",{className:"text-red-500",children:H.lastname})]})})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("div",{className:"w-1/2 pr-4",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396]",children:"เลขที่บัตรประจำตัวประชาชน"}),(0,s.jsx)("label",{className:"".concat(l?"bg-white":"bg-[#F8F5FB]","  input input-bordered flex items-center gap-2 w-full"),children:(0,s.jsx)("input",{type:"text",className:"grow text-[#705396]",value:j,maxLength:13,pattern:"\\d{13}",readOnly:!l,onChange:e=>g(e.target.value)})}),H.idCard&&(0,s.jsx)("span",{className:"text-red-500",children:H.idCard})]})}),(0,s.jsx)("div",{className:"w-1/2 pl-4",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396]",children:"วันเดือนปีเกิด"}),l?(0,s.jsx)(w._,{dateAdapter:y.Q,children:(0,s.jsx)(b.M,{value:_,format:"DD-MM-YYYY",onChange:e=>F(e),disabled:!l,slotProps:{textField:{fullWidth:!0,className:"".concat(l?"":"bg-[#F8F5FB]"," rounded-lg text-[#705396] hover:border-gray-500 h-[48px]"),InputProps:{style:{borderRadius:"8px",color:"#705396"},className:"w-full rounded-lg text-[#705396] focus:border-gray-500 h-[48px]"}}}})}):(0,s.jsx)("label",{className:"bg-[#F8F5FB] input input-bordered flex items-center gap-2 w-full",children:(0,s.jsx)("input",{type:"text",className:"grow text-[#705396]",value:_?_.format("DD-MM-YYYY"):"",readOnly:!0})}),H.birthDate&&(0,s.jsx)("span",{className:"text-red-500",children:H.birthDate})]})})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("div",{className:"w-1/2 pr-4",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396]",children:"วันที่ลงทะเบียน"}),(0,s.jsx)("label",{className:" bg-[#F8F5FB] input input-bordered flex items-center gap-2 w-full",children:(0,s.jsx)("input",{type:"text",className:"grow pointer-events-none text-[#705396]",value:l?B:(0,r.p)(t.patient.register_date),readOnly:!0})})]})}),(0,s.jsx)("div",{className:"w-1/2 pl-4",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396]",children:"วันนัดหมาย"}),l?(0,s.jsx)(w._,{dateAdapter:y.Q,children:(0,s.jsx)(N.x,{value:S,format:"DD-MM-YYYY HH:mm:ss",onChange:e=>C(e),disabled:!l,slotProps:{textField:{fullWidth:!0,className:"".concat(l?"":"bg-[#F8F5FB]"," rounded-lg text-[#705396] hover:border-gray-500 h-[48px]"),InputProps:{style:{borderRadius:"8px",color:"#705396"},className:"w-full rounded-lg text-[#705396] focus:border-gray-500 h-[48px]"}}}})}):(0,s.jsx)("label",{className:"bg-[#F8F5FB] input input-bordered flex items-center gap-2 w-full",children:(0,s.jsx)("input",{type:"text",className:"grow text-[#705396]",value:S?S.format("DD-MM-YYYY HH:mm:ss"):"",readOnly:!0})}),H.appointmentDate&&(0,s.jsx)("span",{className:"text-red-500",children:H.appointmentDate})]})})]})]}),(0,s.jsxs)("div",{className:"my-2 w-1/2 pr-4",children:[(0,s.jsxs)("div",{className:"flex h-[30px]",children:[(0,s.jsx)("span",{className:"text-[#705396]",children:"เลือกยาที่ควรหยุดรับประทาน"}),l&&(0,s.jsx)("button",{className:"mx-2",onClick:()=>{O([...k,{id:Date.now(),name:"",dose:"",isOther:!1}])},children:(0,s.jsx)(m.default,{src:"/image/icon_addplus.png",alt:"add medication",width:30,height:30})})]}),I&&(0,s.jsx)("span",{className:"text-red-500",children:I}),(0,s.jsxs)("div",{className:"rounded bg-[#E8DBF5] ".concat(I?"min-h-[44dvh]":"min-h-[46dvh]"," p-3"),children:[(0,s.jsxs)("span",{className:"text-[#705396]",children:[" รายการที่เลือก ",l?k.length:t.patient.med.length," รายการ"]}),(0,s.jsx)("div",{className:"".concat(I?"min-h-[38dvh]":"max-h-[40dvh]"," overflow-y-auto"),children:l?(0,s.jsx)("div",{children:k.map(e=>(0,s.jsxs)("div",{className:"flex justify-between pt-2",children:[e.isOther?(0,s.jsx)("input",{type:"text",className:"w-[70%] mx-1 h-[3rem] rounded bg-[#F8F5FB] text-center text-[#705396]",value:"other"===e.name?"":P[e.id]||e.name||"",onChange:t=>G(t,e.id),placeholder:"ระบุชื่อยา"}):(0,s.jsxs)("select",{className:"w-[70%] mx-1 h-[3rem] rounded bg-[#F8F5FB] text-center text-[#705396]",value:e.name,onChange:t=>Q(t,e.id),children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"เลือกยา"}),T.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.id)),(0,s.jsx)("option",{value:"other",children:"อื่นๆ"})]}),(0,s.jsxs)("select",{className:"w-[20%] mx-1 h-[3rem] rounded text-center text-[#705396]",value:e.dose,onChange:t=>U(t,e.id),children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"วัน"}),[...Array(7)].map((e,t)=>(0,s.jsxs)("option",{value:t+1,children:[t+1," วัน"]},t+1))]}),(0,s.jsx)("button",{className:"mx-1",onClick:()=>W(e.id),children:(0,s.jsx)(m.default,{src:"/image/icon_delete.png",alt:"delete medication",width:30,height:30})})]},e.id))}):(0,s.jsx)("div",{children:k.map(e=>(0,s.jsxs)("div",{className:"flex justify-between pt-2",children:[e.isOther?(0,s.jsx)("input",{type:"text",className:"w-[70%] mx-1 h-[3rem] opacity-70 rounded bg-[#F8F5FB] text-center text-[#705396]",defaultValue:e.name,disabled:!0,placeholder:"ระบุชื่อยา"}):(0,s.jsx)("select",{className:"w-[70%] mx-1 h-[3rem] rounded bg-[#F8F5FB] text-center text-[#705396]",defaultValue:e.name,disabled:!0,children:(0,s.jsx)("option",{value:e.name,children:e.name})}),(0,s.jsx)("select",{className:"w-[20%] mx-1 h-[3rem] rounded text-center text-[#705396]",defaultValue:e.dose,disabled:!0,children:(0,s.jsxs)("option",{value:e.dose,children:[e.dose," วัน"]})})]},e.id))})})]})]})]}),(0,s.jsxs)("div",{className:" w-[45%]",children:[(0,s.jsxs)("div",{className:"flex pl-8",children:[(0,s.jsx)("div",{className:"w-[63.016%] ",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396] ",children:"Line Username"}),(0,s.jsx)("label",{className:"bg-[#F8F5FB] relative input input-bordered flex items-center gap-2 w-full",children:(0,s.jsx)("input",{type:"text",className:"grow text-[#705396]",value:D,readOnly:!0})})]})}),(0,s.jsx)("div",{className:"flex items-center pt-6",children:(0,s.jsx)("button",{onClick:J,className:"relative text-white font-light bg-[#693092] btn btn-active mx-3",children:(0,s.jsx)(m.default,{src:"/image/icon_refresh.png",alt:"logo",width:30,height:30})})})]}),!l&&(0,s.jsx)(v,{visit_id:t.patient.visit_id,dailyDetail:t.daily_detail,notilist:Z})]})]})]})})})},Y=function(){let e=(0,i.useSearchParams)(),[t,a]=(0,n.useState)(""),[r,m]=(0,n.useState)(null),[x,p]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{let t=e.get("id"),s=async()=>{try{var e;let s=await d.Z.get("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","visit/task/").concat(t));m(s.data);let l=null===(e=s.data.patient)||void 0===e?void 0:e.state;"string"==typeof l&&a(l)}catch(e){console.error("Error fetching data:",e)}finally{p(!1)}};t?s():p(!1)},[e]),x)?(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsx)(l.default,{}),"OTP"===t?(0,s.jsx)(o.Z,{}):(0,s.jsx)(o.o,{})]}):(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsx)(l.default,{}),"OTP"===t?r&&(0,s.jsx)(c,{items:r}):"Registered"===t?r&&(0,s.jsx)(F,{items:r}):r&&(0,s.jsx)(B,{items:r})]})}},18416:function(){}},function(e){e.O(0,[325,461,990,236,648,138,938,304,971,23,744],function(){return e(e.s=68259)}),_N_E=e.O()}]);