(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[527],{8259:function(e,t,s){Promise.resolve().then(s.bind(s,4308))},5055:function(e,t,s){!function(e){e.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),monthsParseExact:!0,weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา H:mm",LLLL:"วันddddที่ D MMMM YYYY เวลา H:mm"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(e){return"หลังเที่ยง"===e},meridiem:function(e,t,s){return e<12?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",ss:"%d วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",w:"1 สัปดาห์",ww:"%d สัปดาห์",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})}(s(9212))},6463:function(e,t,s){"use strict";var a=s(1169);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},4308:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var a=s(7437),l=s(6504),i=s(2265),n=s(6463),c=s(8472),d=s(448),r=e=>{let{items:t}=e,s=t.patient.appointment_date.split("T")[0],l="".concat(s,"T").concat(t.patient.appointment_time);return(0,a.jsx)("div",{className:"px-8",children:(0,a.jsx)("div",{className:"h-full w-full rounded-[15px] bg-white p-5 flex justify-center",children:(0,a.jsxs)("div",{className:"min-h-[81.71dvh] w-[70%] flex flex-col",children:[(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"text-2xl text-[#5955B3] font-semibold",children:"เพิ่มผู้ป่วยใหม่"})}),(0,a.jsxs)("form",{action:"",className:" mt-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"w-1/2 pr-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"ชื่อ"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"text",className:"grow text-[#705396]",value:t.patient.patient_fname,readOnly:!0})})]})}),(0,a.jsx)("div",{className:"w-1/2 pl-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"นามสกุล"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"text",className:"grow text-[#705396]",value:t.patient.patient_lname,readOnly:!0})})]})})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"w-1/2 pr-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"เลขที่บัตรประจำตัวประชาชน"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"text",className:"grow text-[#705396]",value:t.patient.id_card,maxLength:13,pattern:"\\d{13}",readOnly:!0})})]})}),(0,a.jsx)("div",{className:"w-1/2 pl-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"วันเดือนปีเกิด"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"date",className:"grow text-[#705396]",value:t.patient.dob,readOnly:!0})})]})})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"w-1/2 pr-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"วันที่ลงทะเบียน"}),(0,a.jsx)("label",{className:" bg-[#F8F5FB] input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"text",className:"grow pointer-events-none text-[#705396]",value:(0,d.p)(t.patient.register_date),readOnly:!0})})]})}),(0,a.jsx)("div",{className:"w-1/2 pl-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"วันนัดหมาย"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"datetime-local",className:"grow text-[#705396]",value:l,readOnly:!0})})]})})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{className:"my-2 w-1/2 pr-4",children:[(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("span",{className:"text-[#705396]",children:"เลือกยาที่ควรหยุดรับประทาน"})}),(0,a.jsxs)("div",{className:"rounded bg-[#E8DBF5] min-h-[49dvh] p-3",children:[(0,a.jsxs)("span",{className:"text-[#705396]",children:[" รายการที่เลือก ",t.patient.med.length," รายการ"]}),(0,a.jsx)("div",{className:"max-h-[45dvh] overflow-y-auto",children:t.patient.med.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between pt-2",children:[(0,a.jsx)("select",{className:"w-[70%] mx-1 h-[3rem] rounded bg-[#F8F5FB] text-center text-[#705396]",defaultValue:e.medic,disabled:!0,children:(0,a.jsx)("option",{value:e.medic,children:e.medic})}),(0,a.jsx)("select",{className:"w-[20%] mx-1 h-[3rem] rounded text-center text-[#705396]",defaultValue:e.val,disabled:!0,children:(0,a.jsxs)("option",{value:e.val,children:[e.val," วัน"]})})]},t))})]})]}),(0,a.jsx)("div",{className:"w-1/2 pl-4 flex justify-center items-center",children:(0,a.jsxs)("div",{className:"text-center w-1/2",children:[(0,a.jsx)("div",{className:"text-[#461F78] text-3xl font-semibold my-2",children:"OTP"}),(0,a.jsx)("div",{className:"text-[#705396] my-2",children:"รหัสนี้ใช้สำหรับลงทะเบียนผู้ใช้งาน Line OA"}),(0,a.jsx)("div",{className:"p-10 bg-[#F8F5FB] my-2",children:(0,a.jsx)("span",{className:"text-[#7F57D0] text-4xl tracking-widest",children:t.patient.otp})})]})})]})]})})})},x=()=>(0,a.jsx)("div",{className:"px-8",children:(0,a.jsx)("div",{className:"h-full w-full rounded-[15px] bg-white p-5 flex justify-center",children:(0,a.jsxs)("div",{className:"min-h-[81.71dvh] w-[70%] flex flex-col",children:[(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"text-2xl text-[#5955B3] font-semibold",children:"เพิ่มผู้ป่วยใหม่"})}),(0,a.jsxs)("form",{action:"",className:" mt-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"w-1/2 pr-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"ชื่อ"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"text",className:"grow text-[#705396]",readOnly:!0})})]})}),(0,a.jsx)("div",{className:"w-1/2 pl-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"นามสกุล"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"text",className:"grow text-[#705396]",readOnly:!0})})]})})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"w-1/2 pr-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"เลขที่บัตรประจำตัวประชาชน"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"text",className:"grow text-[#705396]",maxLength:13,pattern:"\\d{13}",readOnly:!0})})]})}),(0,a.jsx)("div",{className:"w-1/2 pl-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"วันเดือนปีเกิด"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"date",className:"grow text-[#705396]",readOnly:!0})})]})})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"w-1/2 pr-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"วันที่ลงทะเบียน"}),(0,a.jsx)("label",{className:" bg-[#F8F5FB] input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"text",className:"grow pointer-events-none text-[#705396]",readOnly:!0})})]})}),(0,a.jsx)("div",{className:"w-1/2 pl-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"วันนัดหมาย"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"datetime-local",className:"grow text-[#705396]",readOnly:!0})})]})})]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{className:"my-2 w-1/2 pr-4",children:[(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("span",{className:"text-[#705396]",children:"เลือกยาที่ควรหยุดรับประทาน"})}),(0,a.jsx)("div",{className:"rounded bg-[#E8DBF5] min-h-[49dvh] p-3",children:(0,a.jsx)("span",{className:"text-[#705396]",children:" รายการที่เลือก 0 รายการ"})})]}),(0,a.jsx)("div",{className:"w-1/2 pl-4 flex justify-center items-center",children:(0,a.jsxs)("div",{className:"text-center w-1/2",children:[(0,a.jsx)("div",{className:"text-[#461F78] text-3xl font-semibold my-2",children:"OTP"}),(0,a.jsx)("div",{className:"text-[#705396] my-2",children:"รหัสนี้ใช้สำหรับลงทะเบียนผู้ใช้งาน Line OA"}),(0,a.jsx)("div",{className:"p-10 bg-[#F8F5FB] my-2",children:(0,a.jsx)("span",{className:"text-[#7F57D0] text-4xl tracking-widest"})})]})})]})]})})});let m=()=>(0,a.jsx)("div",{className:"px-8",children:(0,a.jsx)("div",{className:"h-full w-full rounded-[15px] bg-white p-5 ",children:(0,a.jsx)("div",{className:"min-h-[81.71dvh] flex flex-col"})})});var o=s(6648),h=s(9212),p=s.n(h);s(5055);var u=e=>{let{isVisible:t,onClose:s,title:l,children:i}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-20 flex justify-center items-center",children:(0,a.jsx)("div",{className:"w-[80%] animate-modalOpen",children:(0,a.jsxs)("div",{className:"relative bg-white p-3 rounded",children:[(0,a.jsx)("div",{className:"absolute right-2",children:(0,a.jsx)("button",{onClick:()=>s(),children:(0,a.jsx)(o.default,{src:"/image/icon_close.png",alt:"logo",width:30,height:30})})}),i]})})}):null};p().locale("th");var j=e=>{let{dailyDetail:t}=e,[s,l]=(0,i.useState)(!1),[n,c]=(0,i.useState)(null),[d,r]=(0,i.useState)(p()()),x=d.clone().startOf("month").startOf("week"),m=d.clone().endOf("month").endOf("week"),h=x.clone().subtract(1,"day"),j=[];for(;h.isBefore(m,"day");)j.push(Array(7).fill(0).map(()=>h.add(1,"day").clone()));let v=e=>e.isSame(d,"month"),N=e=>{console.log(e),c(e),l(!0)};return(0,a.jsxs)("div",{className:"pl-8 pt-10",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center ",children:[(0,a.jsx)("button",{onClick:()=>{r(d.clone().subtract(1,"month"))},children:(0,a.jsx)(o.default,{src:"/image/icon_left.png",alt:"logo",width:15,height:15})}),(0,a.jsx)("span",{className:"text-lg font-semibold text-[#BE77F1]",children:d.format("MMMM YYYY")}),(0,a.jsx)("button",{onClick:()=>{r(d.clone().add(1,"month"))},children:(0,a.jsx)(o.default,{src:"/image/icon_right.png",alt:"logo",width:15,height:15})})]}),(()=>{let e=p().weekdays(!0);return(0,a.jsx)("div",{className:"grid grid-cols-7 bg-[#B498F0] text-white rounded mt-4",children:e.map(e=>(0,a.jsx)("div",{className:"text-center py-2",children:e},e))})})(),(0,a.jsx)("div",{className:"grid grid-cols-7",children:j.map((e,s)=>(0,a.jsx)("div",{className:"contents",children:e.map((e,s)=>{let l=t.some((s,a)=>p()(s.date_before_appointment).isSame(e,"day")&&a===t.length-1);return(0,a.jsxs)("div",{className:"relative flex justify-end items-end text-center h-24 p-2 w-full border ".concat(v(e)?"":"text-gray-400"),children:[t.map((s,l)=>{if(p()(s.date_before_appointment).isSame(e,"day")){let i=p()().isSame(e,"day"),n=e.isBefore(p()(),"day");return(0,a.jsxs)("div",{children:[0===l&&(0,a.jsx)("div",{className:"w-[calc(100%-8px)] absolute top-1 left-1 text-white bg-[#BE77F1] p-1 rounded",children:"ลงทะเบียน"}),l===t.length-1?(0,a.jsx)("div",{className:"h-[calc(100%-8px)] w-[calc(100%-8px)] absolute top-1 left-1 text-center text-white p-1 rounded ".concat(i||!n?"bg-[#BE77F1]":"bg-[#AEB2B5]"),children:"ส่องกล้อง"}):(0,a.jsx)("button",{className:"absolute bottom-2 left-2 rounded text-white w-7 h-7 font-light flex justify-center items-center ".concat(i||!n?"bg-[#705396] hover:bg-[#BE77F1]":"bg-[#AEB2B5] hover:bg-[#e5e7eb]"),onClick:()=>N(s),children:(0,a.jsx)(o.default,{className:"gap-2",src:i||!n?"/image/icon_edit.png":"/image/icon_edit_pass.png",alt:"logo",width:20,height:20})})]},s.date_before_appointment)}return null}),(0,a.jsx)("div",{className:"absolute bottom-2 right-3 ".concat(l?"text-white":""),children:e.format("D")})]},s)})},s))}),(0,a.jsx)(u,{isVisible:s,onClose:()=>l(!1),title:"รายละเอียดการแจ้งเตือน",children:n&&(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsxs)("div",{className:"text-2xl text-[#5955B3] font-semibold",children:["แจ้งเตือนคุณ ",n.ptname]}),(0,a.jsxs)("div",{className:"text-2xl text-[#5955B3] font-semibold",children:["วันที่ ",n.date_before_appointment]}),(0,a.jsxs)("div",{className:"rounded bg-[#E8DBF5] min-h-[48dvh] p-3 mt-4 text-xl",children:[(0,a.jsx)("span",{className:"my-2",children:"ข้อควรปฏิบัติก่อนรับการตรวจส่องกล้องลำไส้ใหญ่"}),(0,a.jsx)("div",{className:"break-words max-h-[460px] ",dangerouslySetInnerHTML:{__html:n.noti_detail||""}})]})]})})]})},v=s(4379),N=s.n(v);p().locale("th");var f=e=>{let{items:t}=e,[s,l]=(0,i.useState)(!1),[n,r]=(0,i.useState)(t.patient.patient_fname),[x,m]=(0,i.useState)(t.patient.patient_lname),[h,u]=(0,i.useState)(t.patient.id_card),[v,f]=(0,i.useState)(t.patient.dob),[g,w]=(0,i.useState)("".concat(t.patient.appointment_date.split("T")[0],"T").concat(t.patient.appointment_time)),[b,y]=(0,i.useState)(t.patient.line_name),[_,S]=(0,i.useState)([]),[F,O]=(0,i.useState)([]),[C,B]=(0,i.useState)({}),[k,D]=(0,i.useState)({}),[T,M]=(0,i.useState)(""),[L,E]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{try{let e=await c.Z.get("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","medical"));O(e.data)}catch(e){console.error("Error fetching medical data:",e)}})(),t.patient.med&&S(t.patient.med.map((e,t)=>({id:t,name:e.medic,dose:e.val,isOther:!1})))},[t.patient.med]);let Y=async()=>{if(_.some(e=>!e.name||!e.dose)){M("กรุณากรอกข้อมูลยาและจำนวนวันที่รับประทานให้ครบถ้วน");return}M("");let e={};if(n.trim()||(e.firstname="กรุณากรอกชื่อ"),x.trim()||(e.lastname="กรุณากรอกนามสกุล"),h.trim()?13!==h.trim().length&&(e.idCard="กรุณากรอกบัตรประจำตัวประชาชนให้ถูกต้อง (13 หลัก)"):e.idCard="กรุณากรอกบัตรประจำตัวประชาชน",v.trim()||(e.birthDate="กรุณากรอกวันเดือนปีเกิด"),g.trim()||(e.appointmentDate="กรุณากรอกวันนัดหมาย"),Object.keys(e).length>0){D(e);return}D({}),await Z()},P=e=>{S(_.filter(t=>t.id!==e))},H=(e,t)=>{let s=e.target.value;S(_.map(e=>e.id===t?{...e,name:s,isOther:"other"===s}:e))},A=(e,t)=>{B({...C,[t]:e.target.value}),S(_.map(s=>s.id===t?{...s,name:e.target.value}:s))},V=(e,t)=>{S(_.map(s=>s.id===t?{...s,dose:e.target.value}:s))},U=async()=>{let e={visit_id:t.patient.visit_id,userId:t.patient.line_id};try{let t=await c.Z.post("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","visit/line/renew"),e);200===t.status?y(t.data.line_name):console.error("Failed to refresh data")}catch(e){console.error("Error while refreshing data:",e)}},Z=async()=>{let e=JSON.stringify(_.map(e=>({val:e.dose,medic:e.name}))),s=new FormData;s.append("fname",n),s.append("lname",x),s.append("idcard",h),s.append("dob",v),s.append("appointment_date",g.split("T")[0]),s.append("appointment_time",g.split("T")[1]),s.append("patient_id",String(t.patient.patient_id)),s.append("med",e);try{let e=await c.Z.post("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","visit/task/").concat(t.patient.visit_id),s);200===e.status?(l(!1),N().fire({title:"สำเร็จ",text:"คุณได้การแก้ไขเรียบร้อยแล้ว",icon:"success",confirmButtonText:"ปิด"}).then(()=>{window.location.reload()})):N().fire({title:"ขออภัย",text:"คุณทำรายการไม่ถูกต้อง กรุณาตรวจสอบใหม่อีกครั้ง",icon:"warning",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-warning"}})}catch(e){console.error("Error saving data:",e),N().fire({title:"ขออภัย",text:"เกิดข้อผิดพลาดในการบันทึกข้อมูล กรุณาลองใหม่อีกครั้ง",icon:"error",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-error"}})}};console.log(t.daily_detail);let I=t.daily_detail.slice(1,t.daily_detail.length-1).some(e=>p()().isSame(e.date_before_appointment,"day"));return console.log(I),(0,a.jsx)("div",{className:"px-8",children:(0,a.jsx)("div",{className:"h-full w-full rounded-[15px] bg-white p-5 ",children:(0,a.jsxs)("div",{className:"min-h-[81.71dvh] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"text-2xl text-[#5955B3] font-semibold",children:"ลงทะเบียนผู้ป่วย"})}),(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)("button",{onClick:s?Y:()=>{l(!0)},className:"relative text-white w-38 font-light btn btn-active mx-4 ".concat(s?"bg-[#693092]":"bg-[#AF88FF]"),children:[(0,a.jsx)(o.default,{className:"gap-2",src:s?"/image/icon_save.png":"/image/icon_edit.png",alt:"logo",width:30,height:30}),(0,a.jsx)("span",{children:s?"Save":"Edit"})]})})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:" w-[55%]",children:[(0,a.jsxs)("form",{action:"",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"w-1/2 pr-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"ชื่อ"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"text",className:"grow text-[#705396]",readOnly:!s,value:n,onChange:e=>r(e.target.value)})}),k.firstname&&(0,a.jsx)("span",{className:"text-red-500",children:k.firstname})]})}),(0,a.jsx)("div",{className:"w-1/2 pl-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396] ",children:"นามสกุล"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"text",className:"grow text-[#705396]",readOnly:!s,value:x,onChange:e=>m(e.target.value)})}),k.lastname&&(0,a.jsx)("span",{className:"text-red-500",children:k.lastname})]})})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"w-1/2 pr-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"เลขที่บัตรประจำตัวประชาชน"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"text",className:"grow text-[#705396]",value:h,maxLength:13,pattern:"\\d{13}",readOnly:!s,onChange:e=>u(e.target.value)})}),k.idCard&&(0,a.jsx)("span",{className:"text-red-500",children:k.idCard})]})}),(0,a.jsx)("div",{className:"w-1/2 pl-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"วันเดือนปีเกิด"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"date",className:"grow text-[#705396]",value:v,readOnly:!s,onChange:e=>f(e.target.value)})}),k.birthDate&&(0,a.jsx)("span",{className:"text-red-500",children:k.birthDate})]})})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"w-1/2 pr-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"วันที่ลงทะเบียน"}),(0,a.jsx)("label",{className:" bg-[#F8F5FB] input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"text",className:"grow pointer-events-none text-[#705396]",value:(0,d.p)(t.patient.register_date),readOnly:!0})})]})}),(0,a.jsx)("div",{className:"w-1/2 pl-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"วันนัดหมาย"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"datetime-local",className:"grow text-[#705396]",value:g,readOnly:!s,onChange:e=>w(e.target.value)})}),k.appointmentDate&&(0,a.jsx)("span",{className:"text-red-500",children:k.appointmentDate})]})})]})]}),(0,a.jsxs)("div",{className:"my-2 w-1/2 pr-4",children:[(0,a.jsxs)("div",{className:"flex ".concat(I?"h-[50px]":"h-[30px]"),children:[(0,a.jsx)("span",{className:"text-[#705396]  ".concat(I?"flex items-center":""," "),children:I?"ข้อความที่ต้องส่งวันที่ ".concat(p()().format("DD-MM-YYYY")):"เลือกยาที่ควรหยุดรับประทาน"}),I&&(0,a.jsxs)("button",{className:"relative text-white w-38 font-light btn btn-active mx-4 bg-[#693092] ",children:[(0,a.jsx)(o.default,{className:"gap-1",src:"/image/icon_edit.png",alt:"logo",width:30,height:30}),(0,a.jsx)("span",{children:" Edit"})]}),!I&&s&&(0,a.jsx)("button",{className:"mx-2",onClick:()=>{S([..._,{id:Date.now(),name:"",dose:"",isOther:!1}])},children:(0,a.jsx)(o.default,{src:"/image/icon_addplus.png",alt:"add medication",width:30,height:30})})]}),(0,a.jsx)("div",{className:"rounded bg-[#E8DBF5] min-h-[48dvh] p-3",children:I?(0,a.jsx)("div",{className:"",children:t.daily_detail.filter(e=>p()(e.date_before_appointment).isSame(p()(),"day")).map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"items-center m-2",children:[(0,a.jsx)("div",{className:"flex",children:null===(s=e.noti_image)||void 0===s?void 0:s.map((e,t)=>(0,a.jsx)(o.default,{src:e,width:100,height:100,alt:"notification image ".concat(t),className:"cursor-pointer max-w-[80px] h-[80px] object-cover rounded-lg mr-3",onClick:()=>window.open(e,"_blank")},t))}),(0,a.jsxs)("div",{className:"w-full text-[#705396] mt-2",children:[(0,a.jsxs)("p",{className:"my-2",children:["แจ้งคุณ ",n," ",x]}),(0,a.jsx)("p",{className:"my-2",children:"ข้อควรปฏิบัติก่อนรับการตรวจส่องกล้องลำไส้ใหญ่"}),(0,a.jsx)("div",{className:" break-words max-h-[30dvh] overflow-y-auto",dangerouslySetInnerHTML:{__html:e.noti_detail||""}})]})]},t)})}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"text-[#705396]",children:[" รายการที่เลือก ",t.patient.med.length," รายการ"]}),(0,a.jsx)("div",{className:"max-h-[45dvh] overflow-y-auto",children:s?(0,a.jsx)("div",{children:_.map(e=>(0,a.jsxs)("div",{className:"flex justify-between pt-2",children:[e.isOther?(0,a.jsx)("input",{type:"text",className:"w-[70%] mx-1 h-[3rem] rounded bg-[#F8F5FB] text-center text-[#705396]",value:C[e.id]||"",onChange:t=>A(t,e.id),placeholder:"ระบุชื่อยา"}):(0,a.jsxs)("select",{className:"w-[70%] mx-1 h-[3rem] rounded bg-[#F8F5FB] text-center text-[#705396]",value:e.name,onChange:t=>H(t,e.id),children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"เลือกยา"}),F.map(e=>(0,a.jsx)("option",{value:e.name,children:e.name},e.id)),(0,a.jsx)("option",{value:"other",children:"อื่นๆ"})]}),(0,a.jsxs)("select",{className:"w-[20%] mx-1 h-[3rem] rounded text-center text-[#705396]",value:e.dose,onChange:t=>V(t,e.id),children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"วัน"}),[...Array(7)].map((e,t)=>(0,a.jsxs)("option",{value:t+1,children:[t+1," วัน"]},t+1))]}),(0,a.jsx)("button",{className:"mx-1",onClick:()=>P(e.id),children:(0,a.jsx)(o.default,{src:"/image/icon_delete.png",alt:"delete medication",width:30,height:30})})]},e.id))}):(0,a.jsx)("div",{children:t.patient.med.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between pt-2",children:[(0,a.jsx)("select",{className:"w-[70%] mx-1 h-[3rem] rounded bg-[#F8F5FB] text-center text-[#705396]",defaultValue:e.medic,disabled:!0,children:(0,a.jsx)("option",{value:e.medic,children:e.medic})}),(0,a.jsx)("select",{className:"w-[20%] mx-1 h-[3rem] rounded text-center text-[#705396]",defaultValue:e.val,disabled:!0,children:(0,a.jsxs)("option",{value:e.val,children:[e.val," วัน"]})})]},t))})})]})})]})]}),(0,a.jsxs)("div",{className:" w-[45%]",children:[(0,a.jsxs)("div",{className:"flex pl-8",children:[(0,a.jsx)("div",{className:"w-[63.016%] ",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396] ",children:"Line Username"}),(0,a.jsx)("label",{className:"relative input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"text",className:"grow text-[#705396]",value:b,readOnly:!0})})]})}),(0,a.jsx)("div",{className:"flex items-center pt-6",children:(0,a.jsx)("button",{onClick:U,className:"relative text-white font-light bg-[#693092] btn btn-active mx-3",children:(0,a.jsx)(o.default,{src:"/image/icon_refresh.png",alt:"logo",width:30,height:30})})})]}),(0,a.jsx)(j,{dailyDetail:t.daily_detail})]})]})]})})})},g=e=>{let{items:t}=e,[s,l]=(0,i.useState)(!1),[n,r]=(0,i.useState)(t.patient.patient_fname),[x,m]=(0,i.useState)(t.patient.patient_lname),[h,p]=(0,i.useState)(t.patient.id_card),[u,v]=(0,i.useState)(t.patient.dob),[N,f]=(0,i.useState)("".concat(t.patient.appointment_date.split("T")[0],"T").concat(t.patient.appointment_time)),[g,w]=(0,i.useState)(t.patient.line_name),[b,y]=(0,i.useState)([]),[_,S]=(0,i.useState)([]),[F,O]=(0,i.useState)({}),[C,B]=(0,i.useState)({}),[k,D]=(0,i.useState)("");(0,i.useEffect)(()=>{(async()=>{try{let e=await c.Z.get("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","medical"));S(e.data)}catch(e){console.error("Error fetching medical data:",e)}})(),t.patient.med&&y(t.patient.med.map(e=>({id:e.id,name:e.medic,dose:e.val,isOther:!1})))},[t.patient.med]);let T=async()=>{let e={visit_id:t.patient.visit_id,userId:t.patient.line_id};try{let t=await c.Z.post("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","visit/line/renew"),e);200===t.status?w(t.data.line_name):console.error("Failed to refresh data")}catch(e){console.error("Error while refreshing data:",e)}};return(0,a.jsx)("div",{className:"px-8",children:(0,a.jsx)("div",{className:"h-full w-full rounded-[15px] bg-white p-5 ",children:(0,a.jsxs)("div",{className:"min-h-[81.71dvh] flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"text-2xl text-[#5955B3] font-semibold",children:"ตรวจสำเร็จแล้ว"})}),(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)("button",{className:"relative text-white w-38 font-light btn btn-active mx-4 bg-[#693092]",children:[(0,a.jsx)(o.default,{className:"gap-2",src:"/image/icon_new_appointment.png",alt:"logo",width:30,height:30}),(0,a.jsx)("span",{children:"New Appointment"})]})})]}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsxs)("div",{className:" w-[55%]",children:[(0,a.jsxs)("form",{action:"",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"w-1/2 pr-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"ชื่อ"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"text",className:"grow text-[#705396]",readOnly:!s,value:n,onChange:e=>r(e.target.value)})})]})}),(0,a.jsx)("div",{className:"w-1/2 pl-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396] ",children:"นามสกุล"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"text",className:"grow text-[#705396]",readOnly:!s,value:x,onChange:e=>m(e.target.value)})}),C.lastname&&(0,a.jsx)("span",{className:"text-red-500",children:C.lastname})]})})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"w-1/2 pr-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"เลขที่บัตรประจำตัวประชาชน"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"text",className:"grow text-[#705396]",value:h,maxLength:13,pattern:"\\d{13}",readOnly:!s,onChange:e=>p(e.target.value)})}),C.idCard&&(0,a.jsx)("span",{className:"text-red-500",children:C.idCard})]})}),(0,a.jsx)("div",{className:"w-1/2 pl-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"วันเดือนปีเกิด"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"date",className:"grow text-[#705396]",value:u,readOnly:!s,onChange:e=>v(e.target.value)})}),C.birthDate&&(0,a.jsx)("span",{className:"text-red-500",children:C.birthDate})]})})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"w-1/2 pr-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"วันที่ลงทะเบียน"}),(0,a.jsx)("label",{className:" bg-[#F8F5FB] input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"text",className:"grow pointer-events-none text-[#705396]",value:(0,d.p)(t.patient.register_date),readOnly:!0})})]})}),(0,a.jsx)("div",{className:"w-1/2 pl-4",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396]",children:"วันนัดหมาย"}),(0,a.jsx)("label",{className:"input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"datetime-local",className:"grow text-[#705396]",value:N,readOnly:!s,onChange:e=>f(e.target.value)})}),C.appointmentDate&&(0,a.jsx)("span",{className:"text-red-500",children:C.appointmentDate})]})})]})]}),(0,a.jsxs)("div",{className:"my-2 w-1/2 pr-4",children:[(0,a.jsx)("div",{className:"flex h-[30px]",children:(0,a.jsx)("span",{className:"text-[#705396]",children:"เลือกยาที่ควรหยุดรับประทาน"})}),(0,a.jsxs)("div",{className:"rounded bg-[#E8DBF5] min-h-[48dvh] p-3",children:[(0,a.jsxs)("span",{className:"text-[#705396]",children:[" รายการที่เลือก ",t.patient.med.length," รายการ"]}),(0,a.jsx)("div",{className:"max-h-[45dvh] overflow-y-auto",children:t.patient.med.map((e,t)=>(0,a.jsxs)("div",{className:"flex justify-between pt-2",children:[(0,a.jsx)("select",{className:"w-[70%] mx-1 h-[3rem] rounded bg-[#F8F5FB] text-center text-[#705396]",defaultValue:e.medic,disabled:!0,children:(0,a.jsx)("option",{value:e.medic,children:e.medic})}),(0,a.jsx)("select",{className:"w-[20%] mx-1 h-[3rem] rounded text-center text-[#705396]",defaultValue:e.val,disabled:!0,children:(0,a.jsxs)("option",{value:e.val,children:[e.val," วัน"]})})]},t))})]})]})]}),(0,a.jsxs)("div",{className:" w-[45%]",children:[(0,a.jsxs)("div",{className:"flex pl-8",children:[(0,a.jsx)("div",{className:"w-[63.016%] ",children:(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsx)("span",{className:"text-[#705396] ",children:"Line Username"}),(0,a.jsx)("label",{className:"relative input input-bordered flex items-center gap-2 w-full",children:(0,a.jsx)("input",{type:"text",className:"grow text-[#705396]",value:g,readOnly:!0})})]})}),(0,a.jsx)("div",{className:"flex items-center pt-6",children:(0,a.jsx)("button",{onClick:T,className:"relative text-white font-light bg-[#693092] btn btn-active mx-3",children:(0,a.jsx)(o.default,{src:"/image/icon_refresh.png",alt:"logo",width:30,height:30})})})]}),(0,a.jsx)(j,{dailyDetail:t.daily_detail})]})]})]})})})},w=function(){let e=(0,n.useSearchParams)(),[t,s]=(0,i.useState)(""),[d,o]=(0,i.useState)(null),[h,p]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{let t=e.get("id"),a=async()=>{try{var e;let a=await c.Z.get("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","visit/task/").concat(t));o(a.data);let l=null===(e=a.data.patient)||void 0===e?void 0:e.state;"string"==typeof l&&s(l)}catch(e){console.error("Error fetching data:",e)}finally{p(!1)}};t?a():p(!1)},[e]),h)?(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)(l.default,{}),"OTP"===t?(0,a.jsx)(x,{}):(0,a.jsx)(m,{})]}):(console.log(t),(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)(l.default,{}),"OTP"===t?d&&(0,a.jsx)(r,{items:d}):"Registered"===t?d&&(0,a.jsx)(f,{items:d}):d&&(0,a.jsx)(g,{items:d})]}))}},6504:function(e,t,s){"use strict";var a=s(7437);s(2265);var l=s(6648),i=s(7138),n=s(4379),c=s.n(n);t.default=()=>(0,a.jsx)("div",{className:"p-8 pb-2",children:(0,a.jsxs)("div",{className:" rounded-[15px] bg-white px-2 py-1 flex justify-between",children:[(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(l.default,{src:"/image/logo_colonoscopy_small.png",alt:"logo",width:80,height:80}),(0,a.jsx)("div",{className:"flex items-center text-xl text-[#9b88c0] font-medium select-none ",children:(0,a.jsx)("h1",{children:"COLONOSCOPY TUH"})}),(0,a.jsxs)(i.default,{href:"".concat("/","home"),className:"mx-10 text-[#461F78] flex items-center text-xl font-bold select-none",children:[(0,a.jsx)("div",{children:(0,a.jsx)(l.default,{src:"/image/icon_home.png",alt:"logo",width:30,height:30})}),(0,a.jsx)("h1",{className:"mx-2",children:"หน้าหลัก"})]})]}),(0,a.jsx)("div",{className:"flex",children:(0,a.jsxs)("div",{onClick:e=>{e.preventDefault(),c().fire({title:"ยืนยันการออกจากระบบ",text:"คุณกำลังออกจากระบบ ต้องการดำเนินการต่อหรือไม่ ?",icon:"warning",showCancelButton:!0,cancelButtonText:"ยกเลิก",confirmButtonText:"ยืนยัน",reverseButtons:!1,customClass:{icon:"custom-swal2-warning"}}).then(e=>{e.isConfirmed&&c().fire({title:"ออกจากระบบ!",text:"คุณได้ออกจากระบบแล้ว",icon:"success",confirmButtonText:"ปิด"}).then(()=>{window.location.href="".concat("/")})})},className:"cursor-pointer mx-16 text-[#461F78] flex items-center text-xl font-bold select-none",children:[(0,a.jsx)("div",{children:(0,a.jsx)(l.default,{src:"/image/icon_out.png",alt:"logo",width:30,height:30})}),(0,a.jsx)("h1",{className:"mx-2",children:"ออกจากระบบ"})]})})]})})},448:function(e,t,s){"use strict";s.d(t,{e:function(){return l},p:function(){return a}});let a=e=>{let t=new Date(e),s=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0"),i=String(t.getUTCHours()).padStart(2,"0"),n=String(t.getUTCMinutes()).padStart(2,"0"),c=String(t.getUTCSeconds()).padStart(2,"0");return"".concat(s,"-").concat(a,"-").concat(l," ").concat(i,":").concat(n,":").concat(c)},l=()=>{let e=new Date(new Date().getTime()),t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),l=String(e.getHours()).padStart(2,"0"),i=String(e.getMinutes()).padStart(2,"0"),n=String(e.getSeconds()).padStart(2,"0");return"".concat(t,"-").concat(s,"-").concat(a," ").concat(l,":").concat(i,":").concat(n)}}},function(e){e.O(0,[461,990,472,648,138,971,23,744],function(){return e(e.s=8259)}),_N_E=e.O()}]);