(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[79],{96014:function(e,t,l){Promise.resolve().then(l.bind(l,63896))},57818:function(e,t,l){"use strict";l.d(t,{default:function(){return s.a}});var n=l(50551),s=l.n(n)},50551:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let n=l(99920);l(57437),l(2265);let s=n._(l(40148));function i(e,t){var l;let n={loading:e=>{let{error:t,isLoading:l,pastDelay:n}=e;return null}};"function"==typeof e&&(n.loader=e);let i={...n,...t};return(0,s.default)({...i,modules:null==(l=i.loadableGenerated)?void 0:l.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},10912:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let n=l(55592);function s(e){let{reason:t,children:l}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return l}},40148:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let n=l(57437),s=l(2265),i=l(10912),a=l(61481);function c(e){return{default:e&&"default"in e?e.default:e}}let r={loader:()=>Promise.resolve(c(()=>null)),loading:null,ssr:!0},o=function(e){let t={...r,...e},l=(0,s.lazy)(()=>t.loader().then(c)),o=t.loading;function d(e){let c=o?(0,n.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,r=t.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(a.PreloadCss,{moduleIds:t.modules}):null,(0,n.jsx)(l,{...e})]}):(0,n.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(l,{...e})});return(0,n.jsx)(s.Suspense,{fallback:c,children:r})}return d.displayName="LoadableComponent",d}},61481:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return i}});let n=l(57437),s=l(58512);function i(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let l=(0,s.getExpectedRequestStore)("next/dynamic css"),i=[];if(l.reactLoadableManifest&&t){let e=l.reactLoadableManifest;for(let l of t){if(!e[l])continue;let t=e[l].files.filter(e=>e.endsWith(".css"));i.push(...t)}}return 0===i.length?null:(0,n.jsx)(n.Fragment,{children:i.map(e=>(0,n.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:l.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},63896:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return g}});var n=l(57437),s=l(86504),i=l(2265),a=l(66648),c=l(64379),r=l.n(c),o=l(50461),d=l(42773),u=l(57818);l(18416);var h=l(38472);let f=(0,u.default)(()=>Promise.all([l.e(70),l.e(436)]).then(l.t.bind(l,98436,23)),{loadableGenerated:{webpack:()=>[98436]},ssr:!1});var x=e=>{var t;let{items:l,onFetchInfo:s}=e,[c,u]=(0,i.useState)(l),[x,m]=(0,i.useState)(!1),[g,j]=(0,i.useState)([]),[p,v]=(0,i.useState)(""),[w,b]=(0,i.useState)(""),[N,y]=(0,i.useState)({}),[_,k]=(0,i.useState)(null),[C,B]=(0,i.useState)(null),[S,O]=(0,i.useState)(!1),[T,E]=(0,i.useState)(!1),[F,P]=(0,i.useState)(!1);(0,i.useEffect)(()=>{u(l)},[l]);let M=()=>{m(!1),j([]),v(""),b("")},Z=e=>{j(g.filter((t,l)=>l!==e)),g.length<=4&&k(null)},D=async(e,t)=>{e.preventDefault();try{(await r().fire({title:"ยืนยันการลบข้อมูล",text:"คุณกำลังลบข้อมูล ต้องการดำเนินการต่อหรือไม่?",icon:"warning",showCancelButton:!0,cancelButtonText:"ยกเลิก",confirmButtonText:"ยืนยัน",reverseButtons:!1,customClass:{icon:"custom-swal2-warning"}})).isConfirmed&&(await h.Z.delete("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","notification/task/").concat(t)),u(c.filter(e=>e.id!==t)),await r().fire({title:"สำเร็จ",text:"คุณได้ทำรายการเรียบร้อยแล้ว",icon:"success",confirmButtonText:"ปิด"}))}catch(e){console.error("Error deleting data:",e),r().fire({title:"ขออภัย",text:"เกิดข้อผิดพลาดในการลบข้อมูล กรุณาลองใหม่อีกครั้ง",icon:"error",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-error"}})}},L=async e=>{try{let t=(await h.Z.get("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","notification/task/").concat(e))).data;B(t),v(t.header),b(t.detail),E(!1),O(!1),m(!0),P(!1)}catch(e){console.error("Error fetching item details:",e)}},R=async()=>{let e=new FormData;e.append("header",p),e.append("des",w),g.forEach(t=>{e.append("image",t)});try{let t=await h.Z.post("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","notification/task/").concat(C.id),e);200===t.status?r().fire({title:"สำเร็จ",text:"คุณได้ทำการแก้ไขข้อความแจ้งเตือนเรียบร้อยแล้ว",icon:"success",confirmButtonText:"ปิด"}).then(()=>{s(),M()}):r().fire({title:"ขออภัย",text:"คุณทำรายการไม่ถูกต้อง กรุณาตรวจสอบใหม่อีกครั้ง",icon:"warning",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-warning"}})}catch(e){console.error("Error saving data:",e),r().fire({title:"ขออภัย",text:"เกิดข้อผิดพลาดในการบันทึกข้อมูล กรุณาลองใหม่อีกครั้ง",icon:"error",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-error"}})}},I=async()=>{let e={};if(p.trim()||(e.titlename="กรุณากรอกหัวข้อ"),Object.keys(e).length>0){y(e);return}y({}),C?await R():await U()},U=async()=>{let e=new FormData;e.append("header",p),e.append("des",w),g.forEach(t=>{e.append("image",t)});try{let t=await h.Z.post("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","notification"),e);200===t.status?r().fire({title:"สำเร็จ",text:"คุณได้ทำการเพิ่มข้อความแจ้งเตือนเรียบร้อยแล้ว",icon:"success",confirmButtonText:"ปิด"}).then(()=>{s(),M()}):r().fire({title:"ขออภัย",text:"คุณทำรายการไม่ถูกต้อง กรุณาตรวจสอบใหม่อีกครั้ง",icon:"warning",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-warning"}})}catch(e){console.error("Error saving data:",e),r().fire({title:"ขออภัย",text:"เกิดข้อผิดพลาดในการบันทึกข้อมูล กรุณาลองใหม่อีกครั้ง",icon:"error",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-error"}})}};return(0,n.jsx)("div",{className:"px-8",children:(0,n.jsxs)("div",{className:"h-full w-full rounded-[15px] bg-white p-5 ",children:[(0,n.jsxs)("div",{className:"min-h-[81.71dvh] flex flex-col",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-2xl text-[#5955B3] font-semibold",children:"ข้อความแจ้งเตือนผู้ป่วย"}),(0,n.jsxs)("div",{className:"text-[#705396]",children:["ทั้งหมด ",l.length," รายการ"]})]}),(0,n.jsx)("div",{children:(0,n.jsxs)("button",{onClick:()=>{E(!0),B(null),m(!0),O(!0),P(!0)},className:"relative text-white w-40 font-light bg-[#AF88FF] btn btn-active",children:[(0,n.jsx)(a.default,{className:"absolute left-4",src:"/image/icon_plus.png",alt:"logo",width:20,height:20}),"Add New"]})})]}),(0,n.jsx)("div",{className:"pt-4 flex-grow",children:(0,n.jsx)("div",{className:"flex flex-wrap -mx-2",children:c.map(e=>(0,n.jsx)(o.Z,{item:e,onDelete:D,onView:L,title:"noti"},e.id))})})]}),(0,n.jsx)(d.Z,{isVisible:x,onClose:M,title:F?"เพิ่มข้อความแจ้งเตือน":"แก้ไขข้อความแจ้งเตือน",children:(0,n.jsxs)("div",{className:"p-5",children:[(0,n.jsx)("div",{className:"text-2xl text-[#705396] font-semibold",children:F?"เพิ่มข้อความแจ้งเตือน":"แก้ไขข้อความแจ้งเตือน"}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("div",{className:"text-[#705396]",children:"ข้อมูลภาพ"}),(0,n.jsx)("div",{className:"mt-4 grid grid-cols-7 gap-7",children:S?(0,n.jsxs)(n.Fragment,{children:[g.length<=4&&(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&(g.length<4?(j([...g,e.target.files[0]]),k(null)):k("สามารถเพิ่มได้สูงสุด 4 รูปเท่านั้น"))},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),(0,n.jsx)("div",{className:"flex items-center justify-center w-full h-auto max-h-40",children:(0,n.jsx)(a.default,{src:"/image/icon_plus_border.png",alt:"add icon",width:40,height:40,className:"w-full h-auto max-h-40"})})]}),g.map((e,t)=>(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(a.default,{src:URL.createObjectURL(e),alt:"Selected ".concat(t),width:40,height:40,className:"w-full h-auto max-h-40 object-cover rounded-lg"}),(0,n.jsx)("button",{onClick:()=>Z(t),className:"absolute top-0 right-0 p-1 shadow-md","aria-label":"Delete",children:(0,n.jsx)(a.default,{src:"/image/icon_delete.png",alt:"delete icon",width:20,height:20})})]},t))]}):(null==C?void 0:null===(t=C.image)||void 0===t?void 0:t.length)>0&&(0,n.jsx)(n.Fragment,{children:C.image.map((e,t)=>(0,n.jsx)("div",{className:"relative",children:(0,n.jsx)(a.default,{src:e,alt:"Image ".concat(t),width:40,height:40,className:"w-full h-auto max-h-40 object-cover rounded-lg cursor-pointer",onClick:()=>window.open(e,"_blank")})},t))})}),_&&(0,n.jsx)("div",{className:"mt-4 text-red-500",children:_}),(0,n.jsx)("div",{className:"w-full mt-4",children:(0,n.jsxs)("div",{className:"my-2",children:[(0,n.jsx)("span",{className:"text-[#705396]",children:"หัวข้อ"}),(0,n.jsx)("label",{className:" input input-bordered flex items-center gap-2 w-full",children:(0,n.jsx)("input",{type:"text",className:"grow text-[#705396]",value:p,onChange:e=>v(e.target.value),disabled:!S})}),N.titlename&&(0,n.jsx)("span",{className:"text-red-500",children:N.titlename})]})}),(0,n.jsxs)("div",{className:"mt-4 mb-16",children:[(0,n.jsx)("span",{className:"text-[#705396]",children:"เนื้อหา"}),(0,n.jsx)(f,{className:"h-[300px]",value:w,onChange:e=>b(e),theme:"snow",readOnly:!S,modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike","blockquote"],[{align:["right","center","justify"]}],[{list:"ordered"},{list:"bullet"}],["link","image"]]}})]}),(0,n.jsx)("div",{className:"mt-4 flex justify-center items-center",children:(0,n.jsxs)("button",{onClick:T?I:()=>{E(!0),O(!0)},className:"text-white w-38 font-light btn btn-active bg-[#693092]",children:[(0,n.jsx)(a.default,{className:"gap-2",src:"/image/icon_save.png",alt:"logo",width:30,height:30}),(0,n.jsx)("span",{children:T?"Save":"Edit"})]})})]})]})})]})})};let m=async e=>{try{let t=await h.Z.get("https://city.planetcloud.cloud/citybackend/lineoa/notification");e(t.data)}catch(e){console.error("Error fetching data:",e)}};var g=function(){let[e,t]=(0,i.useState)([]);return(0,i.useEffect)(()=>{m(t)},[]),(0,n.jsxs)("div",{className:"min-h-screen",children:[(0,n.jsx)(s.default,{}),(0,n.jsx)(x,{items:e,onFetchInfo:()=>m(t)})]})}},86504:function(e,t,l){"use strict";var n=l(57437);l(2265);var s=l(66648),i=l(87138),a=l(64379),c=l.n(a),r=l(16463);t.default=()=>{let e=(0,r.useRouter)();return(0,n.jsx)("div",{className:"p-8 pb-2",children:(0,n.jsxs)("div",{className:" rounded-[15px] bg-white px-2 py-1 flex justify-between",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(s.default,{src:"/image/logo_colonoscopy_small.png",alt:"logo",width:80,height:80}),(0,n.jsx)("div",{className:"flex items-center text-xl text-[#9b88c0] font-medium select-none ",children:(0,n.jsx)("h1",{children:"COLONOSCOPY TUH"})}),(0,n.jsxs)(i.default,{href:"".concat("/","home"),className:"ml-10 text-[#461F78] flex items-center text-xl font-bold select-none",children:[(0,n.jsx)("div",{children:(0,n.jsx)(s.default,{src:"/image/icon_home.png",alt:"logo",width:30,height:30})}),(0,n.jsx)("h1",{className:"mx-2",children:"หน้าหลัก"})]}),(0,n.jsxs)(i.default,{href:"#",onClick:()=>e.back(),className:"mx-5 text-[#461F78] flex items-center text-xl font-bold select-none",children:[(0,n.jsx)("div",{children:(0,n.jsx)(s.default,{src:"/image/icon_back.png",alt:"logo",width:30,height:30})}),(0,n.jsx)("h1",{className:"mx-2",children:"ย้อนกลับ"})]})]}),(0,n.jsx)("div",{className:"flex",children:(0,n.jsxs)("div",{onClick:e=>{e.preventDefault(),c().fire({title:"ยืนยันการออกจากระบบ",text:"คุณกำลังออกจากระบบ ต้องการดำเนินการต่อหรือไม่ ?",icon:"warning",showCancelButton:!0,cancelButtonText:"ยกเลิก",confirmButtonText:"ยืนยัน",reverseButtons:!1,customClass:{icon:"custom-swal2-warning"}}).then(e=>{e.isConfirmed&&c().fire({title:"ออกจากระบบ!",text:"คุณได้ออกจากระบบแล้ว",icon:"success",confirmButtonText:"ปิด"}).then(()=>{window.location.href="".concat("/")})})},className:"cursor-pointer mx-16 text-[#461F78] flex items-center text-xl font-bold select-none",children:[(0,n.jsx)("div",{children:(0,n.jsx)(s.default,{src:"/image/icon_out.png",alt:"logo",width:30,height:30})}),(0,n.jsx)("h1",{className:"mx-2",children:"ออกจากระบบ"})]})})]})})}},50461:function(e,t,l){"use strict";var n=l(57437);l(2265);var s=l(66648);t.Z=e=>{let{item:t,onDelete:l,onView:i,title:a}=e,c="noti"===a?[1,2,3,4].includes(t.id):[2,3,4,5,6,7,8,9].includes(t.id);return(0,n.jsx)("div",{className:"w-full sm:w-1/2 lg:w-1/4 px-2 mb-4",children:(0,n.jsx)("div",{className:"border border-[#705396] bg-[#F4F4FE] shadow-md rounded-lg image-full h-full",children:(0,n.jsxs)("div",{className:"card-body p-2",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("div",{className:"w-4/5 break-words overflow-hidden text-ellipsis min-h-[48px] max-h-[50px]",children:t.header}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("button",{className:"mx-1",onClick:e=>{e.preventDefault(),i(t.id)},children:(0,n.jsx)(s.default,{src:"/image/icon_view.png",alt:"logo",width:30,height:30})}),!c&&(0,n.jsx)("button",{onClick:e=>{l(e,t.id)},children:(0,n.jsx)(s.default,{src:"/image/icon_trash.png",alt:"logo",width:30,height:30})})]})]}),(0,n.jsx)("div",{className:"border-b border-[#705396] opacity-50"}),(0,n.jsx)("div",{className:"break-words overflow-hidden text-ellipsis max-h-[90px]",dangerouslySetInnerHTML:{__html:t.detail}})]})})})}},42773:function(e,t,l){"use strict";var n=l(57437);l(2265);var s=l(66648);t.Z=e=>{let{isVisible:t,onClose:l,title:i,children:a}=e;return t?(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-20 flex justify-center items-center",children:(0,n.jsx)("div",{className:"w-[80%] animate-modalOpen",children:(0,n.jsxs)("div",{className:"relative bg-white p-3 rounded",children:[(0,n.jsx)("div",{className:"absolute right-2",children:(0,n.jsx)("button",{onClick:()=>l(),children:(0,n.jsx)(s.default,{src:"/image/icon_close.png",alt:"logo",width:30,height:30})})}),a]})})}):null}},18416:function(){}},function(e){e.O(0,[325,461,236,648,138,971,23,744],function(){return e(e.s=96014)}),_N_E=e.O()}]);