(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[79],{6014:function(e,t,l){Promise.resolve().then(l.bind(l,3896))},7818:function(e,t,l){"use strict";l.d(t,{default:function(){return n.a}});var s=l(551),n=l.n(s)},551:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a}});let s=l(9920);l(7437),l(2265);let n=s._(l(148));function a(e,t){var l;let s={loading:e=>{let{error:t,isLoading:l,pastDelay:s}=e;return null}};"function"==typeof e&&(s.loader=e);let a={...s,...t};return(0,n.default)({...a,modules:null==(l=a.loadableGenerated)?void 0:l.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},912:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}});let s=l(5592);function n(e){let{reason:t,children:l}=e;if("undefined"==typeof window)throw new s.BailoutToCSRError(t);return l}},148:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let s=l(7437),n=l(2265),a=l(912),i=l(1481);function c(e){return{default:e&&"default"in e?e.default:e}}let r={loader:()=>Promise.resolve(c(()=>null)),loading:null,ssr:!0},o=function(e){let t={...r,...e},l=(0,n.lazy)(()=>t.loader().then(c)),o=t.loading;function d(e){let c=o?(0,s.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,r=t.ssr?(0,s.jsxs)(s.Fragment,{children:["undefined"==typeof window?(0,s.jsx)(i.PreloadCss,{moduleIds:t.modules}):null,(0,s.jsx)(l,{...e})]}):(0,s.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(l,{...e})});return(0,s.jsx)(n.Suspense,{fallback:c,children:r})}return d.displayName="LoadableComponent",d}},1481:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return a}});let s=l(7437),n=l(8512);function a(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let l=(0,n.getExpectedRequestStore)("next/dynamic css"),a=[];if(l.reactLoadableManifest&&t){let e=l.reactLoadableManifest;for(let l of t){if(!e[l])continue;let t=e[l].files.filter(e=>e.endsWith(".css"));a.push(...t)}}return 0===a.length?null:(0,s.jsx)(s.Fragment,{children:a.map(e=>(0,s.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:l.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},3896:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return g}});var s=l(7437),n=l(6504),a=l(2265),i=l(6648),c=l(4379),r=l.n(c),o=l(461),d=l(2773),u=l(7818);l(8416);var h=l(8472);let f=(0,u.default)(()=>Promise.all([l.e(70),l.e(436)]).then(l.t.bind(l,8436,23)),{loadableGenerated:{webpack:()=>[8436]},ssr:!1});var x=e=>{var t;let{items:l,onFetchInfo:n}=e,[c,u]=(0,a.useState)(l),[x,m]=(0,a.useState)(!1),[g,j]=(0,a.useState)([]),[p,v]=(0,a.useState)(""),[b,w]=(0,a.useState)(""),[N,y]=(0,a.useState)({}),[_,C]=(0,a.useState)(null),[k,O]=(0,a.useState)(null),[S,B]=(0,a.useState)(!1);(0,a.useEffect)(()=>{u(l)},[l]);let P=()=>{m(!1),j([]),v(""),w("")},F=e=>{j(g.filter((t,l)=>l!==e)),g.length<=4&&C(null)},T=async(e,t)=>{e.preventDefault();try{(await r().fire({title:"ยืนยันการลบข้อมูล",text:"คุณกำลังลบข้อมูล ต้องการดำเนินการต่อหรือไม่?",icon:"warning",showCancelButton:!0,cancelButtonText:"ยกเลิก",confirmButtonText:"ยืนยัน",reverseButtons:!1,customClass:{icon:"custom-swal2-warning"}})).isConfirmed&&(await h.Z.delete("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","notification/task/").concat(t)),u(c.filter(e=>e.id!==t)),await r().fire({title:"สำเร็จ",text:"คุณได้ทำรายการเรียบร้อยแล้ว",icon:"success",confirmButtonText:"ปิด"}))}catch(e){console.error("Error deleting data:",e),r().fire({title:"ขออภัย",text:"เกิดข้อผิดพลาดในการลบข้อมูล กรุณาลองใหม่อีกครั้ง",icon:"error",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-error"}})}},E=async e=>{try{let t=(await h.Z.get("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","notification/task/").concat(e))).data;O(t),v(t.header),w(t.detail),B(!1),m(!0)}catch(e){console.error("Error fetching item details:",e)}},M=async()=>{let e={};if(p.trim()||(e.titlename="กรุณากรอกหัวข้อ"),Object.keys(e).length>0){y(e);return}y({}),await L()},L=async()=>{let e=new FormData;e.append("header",p),e.append("des",b),g.forEach(t=>{e.append("image",t)});try{let t=await h.Z.post("".concat("https://city.planetcloud.cloud/citybackend/lineoa/","notification"),e);200===t.status?r().fire({title:"สำเร็จ",text:"คุณได้ทำการเพิ่มข้อความแจ้งเตือนเรียบร้อยแล้ว",icon:"success",confirmButtonText:"ปิด"}).then(()=>{n(),P()}):r().fire({title:"ขออภัย",text:"คุณทำรายการไม่ถูกต้อง กรุณาตรวจสอบใหม่อีกครั้ง",icon:"warning",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-warning"}})}catch(e){console.error("Error saving data:",e),r().fire({title:"ขออภัย",text:"เกิดข้อผิดพลาดในการบันทึกข้อมูล กรุณาลองใหม่อีกครั้ง",icon:"error",confirmButtonText:"ปิด",customClass:{icon:"custom-swal2-error"}})}};return(0,s.jsx)("div",{className:"px-8",children:(0,s.jsxs)("div",{className:"h-full w-full rounded-[15px] bg-white p-5 ",children:[(0,s.jsxs)("div",{className:"min-h-[81.71dvh] flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl text-[#5955B3] font-semibold",children:"ข้อความแจ้งเตือนผู้ป่วย"}),(0,s.jsxs)("div",{className:"text-[#705396]",children:["ทั้งหมด ",l.length," รายการ"]})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("button",{onClick:()=>{m(!0),B(!0)},className:"relative text-white w-40 font-light bg-[#AF88FF] btn btn-active",children:[(0,s.jsx)(i.default,{className:"absolute left-4",src:"/image/icon_plus.png",alt:"logo",width:20,height:20}),"Add New"]})})]}),(0,s.jsx)("div",{className:"pt-4 flex-grow",children:(0,s.jsx)("div",{className:"flex flex-wrap -mx-2",children:c.map(e=>(0,s.jsx)(o.Z,{item:e,onDelete:T,onView:E,title:"noti"},e.id))})})]}),(0,s.jsx)(d.Z,{isVisible:x,onClose:P,title:"เพิ่มข้อความแจ้งเตือน",children:(0,s.jsxs)("div",{className:"p-5",children:[(0,s.jsx)("div",{className:"text-2xl text-[#705396] font-semibold",children:"เพิ่มข้อความแจ้งเตือน"}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("div",{className:"text-[#705396]",children:"ข้อมูลภาพ"}),(0,s.jsx)("div",{className:"mt-4 grid grid-cols-7 gap-7",children:S?(0,s.jsxs)(s.Fragment,{children:[g.length<=4&&(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&(g.length<4?(j([...g,e.target.files[0]]),C(null)):C("สามารถเพิ่มได้สูงสุด 4 รูปเท่านั้น"))},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),(0,s.jsx)("div",{className:"flex items-center justify-center w-full h-auto max-h-40",children:(0,s.jsx)(i.default,{src:"/image/icon_plus_border.png",alt:"add icon",width:40,height:40,className:"w-full h-auto max-h-40"})})]}),g.map((e,t)=>(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(i.default,{src:URL.createObjectURL(e),alt:"Selected ".concat(t),width:40,height:40,className:"w-full h-auto max-h-40 object-cover rounded-lg"}),(0,s.jsx)("button",{onClick:()=>F(t),className:"absolute top-0 right-0 p-1 shadow-md","aria-label":"Delete",children:(0,s.jsx)(i.default,{src:"/image/icon_delete.png",alt:"delete icon",width:20,height:20})})]},t))]}):(null==k?void 0:null===(t=k.image)||void 0===t?void 0:t.length)>0&&(0,s.jsx)(s.Fragment,{children:k.image.map((e,t)=>(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(i.default,{src:e,alt:"Image ".concat(t),width:40,height:40,className:"w-full h-auto max-h-40 object-cover rounded-lg cursor-pointer",onClick:()=>window.open(e,"_blank")})},t))})}),_&&(0,s.jsx)("div",{className:"mt-4 text-red-500",children:_}),(0,s.jsx)("div",{className:"w-full mt-4",children:(0,s.jsxs)("div",{className:"my-2",children:[(0,s.jsx)("span",{className:"text-[#705396]",children:"หัวข้อ"}),(0,s.jsx)("label",{className:" input input-bordered flex items-center gap-2 w-full",children:(0,s.jsx)("input",{type:"text",className:"grow text-[#705396]",value:p,onChange:e=>v(e.target.value),disabled:!S})}),N.titlename&&(0,s.jsx)("span",{className:"text-red-500",children:N.titlename})]})}),(0,s.jsxs)("div",{className:"mt-4 mb-16",children:[(0,s.jsx)("span",{className:"text-[#705396]",children:"เนื้อหา"}),(0,s.jsx)(f,{className:"h-[300px] text-[#705396]",value:b,onChange:e=>w(e),theme:"snow",readOnly:!S})]}),S&&(0,s.jsx)("div",{className:"mt-4 flex justify-center items-center",children:(0,s.jsxs)("button",{onClick:M,className:"text-white w-38 font-light btn btn-active bg-[#693092]",children:[(0,s.jsx)(i.default,{className:"gap-2",src:"/image/icon_save.png",alt:"logo",width:30,height:30}),(0,s.jsx)("span",{children:"Save"})]})})]})]})})]})})};let m=async e=>{try{let t=await h.Z.get("https://city.planetcloud.cloud/citybackend/lineoa/notification");e(t.data)}catch(e){console.error("Error fetching data:",e)}};var g=function(){let[e,t]=(0,a.useState)([]);return(0,a.useEffect)(()=>{m(t)},[]),(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsx)(n.default,{}),(0,s.jsx)(x,{items:e,onFetchInfo:()=>m(t)})]})}},6504:function(e,t,l){"use strict";var s=l(7437);l(2265);var n=l(6648),a=l(7138),i=l(4379),c=l.n(i),r=l(6463);t.default=()=>{let e=(0,r.useRouter)();return(0,s.jsx)("div",{className:"p-8 pb-2",children:(0,s.jsxs)("div",{className:" rounded-[15px] bg-white px-2 py-1 flex justify-between",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(n.default,{src:"/image/logo_colonoscopy_small.png",alt:"logo",width:80,height:80}),(0,s.jsx)("div",{className:"flex items-center text-xl text-[#9b88c0] font-medium select-none ",children:(0,s.jsx)("h1",{children:"COLONOSCOPY TUH"})}),(0,s.jsxs)(a.default,{href:"".concat("/","home"),className:"ml-10 text-[#461F78] flex items-center text-xl font-bold select-none",children:[(0,s.jsx)("div",{children:(0,s.jsx)(n.default,{src:"/image/icon_home.png",alt:"logo",width:30,height:30})}),(0,s.jsx)("h1",{className:"mx-2",children:"หน้าหลัก"})]}),(0,s.jsxs)(a.default,{href:"#",onClick:()=>e.back(),className:"mx-5 text-[#461F78] flex items-center text-xl font-bold select-none",children:[(0,s.jsx)("div",{children:(0,s.jsx)(n.default,{src:"/image/icon_back.png",alt:"logo",width:30,height:30})}),(0,s.jsx)("h1",{className:"mx-2",children:"ย้อนกลับ"})]})]}),(0,s.jsx)("div",{className:"flex",children:(0,s.jsxs)("div",{onClick:e=>{e.preventDefault(),c().fire({title:"ยืนยันการออกจากระบบ",text:"คุณกำลังออกจากระบบ ต้องการดำเนินการต่อหรือไม่ ?",icon:"warning",showCancelButton:!0,cancelButtonText:"ยกเลิก",confirmButtonText:"ยืนยัน",reverseButtons:!1,customClass:{icon:"custom-swal2-warning"}}).then(e=>{e.isConfirmed&&c().fire({title:"ออกจากระบบ!",text:"คุณได้ออกจากระบบแล้ว",icon:"success",confirmButtonText:"ปิด"}).then(()=>{window.location.href="".concat("/")})})},className:"cursor-pointer mx-16 text-[#461F78] flex items-center text-xl font-bold select-none",children:[(0,s.jsx)("div",{children:(0,s.jsx)(n.default,{src:"/image/icon_out.png",alt:"logo",width:30,height:30})}),(0,s.jsx)("h1",{className:"mx-2",children:"ออกจากระบบ"})]})})]})})}},461:function(e,t,l){"use strict";var s=l(7437);l(2265);var n=l(6648);t.Z=e=>{let{item:t,onDelete:l,onView:a,title:i}=e,c="noti"===i?[1,2,3,4].includes(t.id):[1,2,3,4,5,6,7,8].includes(t.id);return(0,s.jsx)("div",{className:"w-full sm:w-1/2 lg:w-1/4 px-2 mb-4",children:(0,s.jsx)("div",{className:"border border-[#705396] bg-[#F4F4FE] shadow-md rounded-lg image-full h-full",children:(0,s.jsxs)("div",{className:"card-body p-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("div",{className:"w-4/5 break-words",children:t.header}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("button",{className:"mx-1",onClick:e=>{e.preventDefault(),a(t.id)},children:(0,s.jsx)(n.default,{src:"/image/icon_view.png",alt:"logo",width:30,height:30})}),!c&&(0,s.jsx)("button",{onClick:e=>{l(e,t.id)},children:(0,s.jsx)(n.default,{src:"/image/icon_trash.png",alt:"logo",width:30,height:30})})]})]}),(0,s.jsx)("div",{className:"border-b border-[#705396] opacity-50"}),(0,s.jsx)("div",{className:"break-words",dangerouslySetInnerHTML:{__html:t.detail}})]})})})}},2773:function(e,t,l){"use strict";var s=l(7437);l(2265);var n=l(6648);t.Z=e=>{let{isVisible:t,onClose:l,title:a,children:i}=e;return t?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-20 flex justify-center items-center",children:(0,s.jsx)("div",{className:"w-[80%] animate-modalOpen",children:(0,s.jsxs)("div",{className:"relative bg-white p-3 rounded",children:[(0,s.jsx)("div",{className:"absolute right-2",children:(0,s.jsx)("button",{onClick:()=>l(),children:(0,s.jsx)(n.default,{src:"/image/icon_close.png",alt:"logo",width:30,height:30})})}),i]})})}):null}},8416:function(){}},function(e){e.O(0,[325,461,595,472,138,971,23,744],function(){return e(e.s=6014)}),_N_E=e.O()}]);